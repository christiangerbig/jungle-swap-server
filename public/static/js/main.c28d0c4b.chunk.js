(this["webpackJsonpjungle-swap-client"]=this["webpackJsonpjungle-swap-client"]||[]).push([[0],{88:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),a=n(17),r=n.n(a),l=n(3),i=n(38),o=n(7),d=n(8),j=n(5),u="https://jungleswap.herokuapp.com",b=n(6),m=n.n(b),h=(n(87),n(88),n(100)),p=n(101),O=n(0),x=function(e){var t=e.user,n=e.isNewRequest,c=e.headerHeight,s=e.aboutHeight;return Object(O.jsx)("div",{children:Object(O.jsxs)(h.a,{className:"pl-5",variant:"dark",expand:"lg",fixed:"top",children:[Object(O.jsxs)(h.a.Brand,{children:[" ",Object(O.jsx)(l.b,{to:"/",onClick:j.animateScroll.scrollToTop,children:" JungleSwap "})," "]}),Object(O.jsx)(h.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(O.jsx)(h.a.Collapse,{id:"basic-navbar-nav",children:Object(O.jsxs)(p.a,{className:"mr-auto",children:[Object(O.jsx)("div",{children:Object(O.jsx)(l.b,{to:"/",className:"p-2",onClick:function(){return j.animateScroll.scrollTo(c+s)},children:" All Plants "})}),t&&Object(O.jsxs)("div",{children:[Object(O.jsx)(l.b,{className:"p-2",to:"/plants/create",children:" Create Plant "}),Object(O.jsx)(l.b,{className:n?"p-2 alertColor":"p-2",to:"/requests/fetch",title:n?"new message":null,children:" Messages "})]}),t?Object(O.jsx)("div",{children:Object(O.jsx)(l.b,{className:"p-2",to:"/logout",title:t.username,children:" Log out "})}):Object(O.jsxs)("div",{children:[Object(O.jsx)(l.b,{className:"p-2",to:"/signin",children:" Sign in "}),Object(O.jsx)(l.b,{className:"p-2",to:"/signup",children:" Sign up "})]})]})})]})})},f=function(){return Object(O.jsx)("div",{className:"footer-row",children:Object(O.jsxs)("footer",{children:["\xa9 2021",Object(O.jsx)(l.b,{href:"https://www.linkedin.com/in/christian-gerbig/",children:" Christian Gerbig "}),"&",Object(O.jsx)(l.b,{href:"https://www.linkedin.com/in/lisa-montebaur/",children:" Lisa Montebaur "})]})})},g=n.p+"static/media/JungleSwap_Home.c4ed9b4c.png",v=n.p+"static/media/JungleSwap_Icon.a6c7c44a.png",N=function(e){var t=e.plants,n=e.query,s=e.headerHeight,a=e.onSearchPlant,r=e.onGetElementsHeight;return Object(c.useEffect)((function(){return r()}),[]),t?Object(O.jsxs)("div",{children:[Object(O.jsx)("header",{className:"text-center pt-5 pb-5 headerImg",id:"titleId",children:Object(O.jsx)("div",{className:"row my-5",children:Object(O.jsxs)("div",{className:"col-6 offset-3 my-5 borderAround",children:[Object(O.jsx)("h2",{className:"title mb-2",children:" JungleSwap "}),Object(O.jsx)("h5",{className:"mt-3 mb-5",children:" Share your green heart "}),Object(O.jsx)("div",{className:"mb-5",children:Object(O.jsx)(l.b,{className:"biggerFontSize",onClick:function(){return j.animateScroll.scrollTo(s)},children:" Try it! "})})]})})}),Object(O.jsx)("section",{id:"aboutId",children:Object(O.jsx)("div",{className:"about centered container",children:Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("div",{className:"col-sm-6 col-md-5 col-lg-6",children:Object(O.jsx)("img",{className:"image",src:g,alt:"plants"})}),Object(O.jsx)("br",{}),Object(O.jsxs)("div",{className:"about col-sm-6 col-md-5 col-lg-6 px-5 noOverflow",children:[Object(O.jsx)("h4",{children:" Welcome to JungleSwap! "}),Object(O.jsx)("h5",{children:" Add green to your Home "}),Object(O.jsxs)("p",{children:[' It"s easy-peasy. ',Object(O.jsx)("br",{}),"Share your plant offshoots. ",Object(O.jsx)("br",{}),"Make money! ",Object(O.jsx)("br",{}),"Or swap them for another plant. ",Object(O.jsx)("br",{}),'Don"t have any baby plants? ',Object(O.jsx)("br",{}),"You can simply shop and give a plant a new home."]}),Object(O.jsx)("img",{className:"icon",src:v,alt:"icon"})]})]})})}),Object(O.jsx)("section",{children:Object(O.jsxs)("div",{className:"container mt-5",children:[Object(O.jsxs)("div",{className:"mt-5 mb-3",children:[Object(O.jsx)("h2",{children:" Plants "}),Object(O.jsx)("hr",{}),Object(O.jsx)("h4",{children:" Search a plant "})]}),Object(O.jsx)("div",{className:"mb-4",children:Object(O.jsx)("input",{className:"smallWidth form-control",type:"text",placeholder:"Search...",value:n,onChange:a})}),Object(O.jsx)("div",{className:"row row-cols-1 row-cols-md-3 g-4",children:t.map((function(e){var t=e._id,n=e.name,c=e.image,s=e.price;return Object(O.jsx)("div",{className:"col mb-5",children:Object(O.jsxs)("div",{className:"card card-medium-width text-center h-100",children:[Object(O.jsx)("img",{className:"card-img-top mediumPicSize",src:c,alt:n}),Object(O.jsxs)("div",{className:"card-body mb-5",children:[Object(O.jsxs)("h5",{children:[" ",n," "]}),Object(O.jsxs)("p",{children:[" ",s," \u20ac "]}),Object(O.jsx)(l.b,{className:"btn btn-outline-dark",to:"/plants/read/".concat(t),children:" Details "})]})]})},t)}))})]})})]}):Object(O.jsx)("div",{class:"spinner-grow text-success m-5",role:"status",children:Object(O.jsx)("span",{class:"visually-hidden",children:" Loading... "})})},y=function(e){var t=e.error,n=e.onSignUp,s=e.onClearError,a=e.onClearNewRequest;return Object(c.useEffect)((function(){s(),a(),j.animateScroll.scrollToTop()}),[]),Object(O.jsx)("div",{className:"container row mt-5",children:Object(O.jsxs)("div",{className:"mt-5 col-11 col-md-5 offset-1 offset-md-5",children:[Object(O.jsx)("h2",{className:"mb-5",children:" Sign Up "}),Object(O.jsxs)("form",{onSubmit:n,children:[Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{htmlFor:"InputUsername",children:" Username "}),Object(O.jsx)("input",{type:"text",className:"form-control",id:"InputUsername",name:"username"})]}),Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{htmlFor:"InputEmail",children:" Email address "}),Object(O.jsx)("input",{type:"email",className:"form-control",id:"InputEmail",name:"email"})]}),Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{htmlFor:"InputPassword",children:" Password "}),Object(O.jsx)("input",{name:"password",type:"password",className:"form-control",id:"InputPassword"})]}),t&&Object(O.jsxs)("p",{className:"warningColor",children:[" ",t," "]}),Object(O.jsx)("button",{type:"submit",className:"btn btn-primary mt-4 btn-outline-dark",formnovalidate:"formnovalidate",children:" Sign up "}),Object(O.jsx)("p",{className:"padding",children:" Already have an account? "}),Object(O.jsx)(l.b,{to:"/signin",children:" Sign in "})]})]})})},w=function(e){var t=e.error,n=e.onSignIn,s=e.onClearError,a=e.onClearNewRequest;return Object(c.useEffect)((function(){s(),a(),j.animateScroll.scrollToTop()}),[]),Object(O.jsx)("div",{className:"container row mt-5 custom fullscreen",children:Object(O.jsxs)("div",{className:"mt-5 col-11 col-md-5 offset-1 offset-md-5",children:[Object(O.jsx)("h2",{className:"mb-5",children:" Sign In "}),Object(O.jsxs)("form",{onSubmit:n,children:[Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{htmlFor:"InputEmail",children:" Email address "}),Object(O.jsx)("input",{type:"email",className:"form-control",id:"InputEmail",name:"email"})]}),Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{htmlFor:"InputPassword",children:" Password "}),Object(O.jsx)("input",{name:"password",type:"password",className:"form-control",id:"InputPassword"})]}),t&&Object(O.jsxs)("p",{className:"warningColor",children:[" ",t," "]}),Object(O.jsx)("button",{type:"submit",className:"btn btn-primary mt-4 btn-outline-dark",formnovalidate:"formnovalidate",children:" Sign in "})]})]})})},S=function(e){var t=e.onLogOut,n=e.onClearNewRequest;return Object(c.useEffect)((function(){t(),n(),j.animateScroll.scrollToTop()}),[]),Object(O.jsx)("div",{})},C=function(e){var t=e.user,n=e.headerHeight,s=e.aboutHeight,a=e.error,r=e.onCreatePlant,i=e.onClearError;return Object(c.useEffect)((function(){return i(),j.animateScroll.scrollToTop(),function(){return j.animateScroll.scrollTo(n+s)}}),[]),t?Object(O.jsx)("div",{className:"container row mt-5 fullscreen",children:Object(O.jsxs)("div",{className:"mt-5 col-11 col-md-5 offset-1 offset-md-6",children:[Object(O.jsx)("h2",{className:"mb-5",children:" Create a plant "}),Object(O.jsxs)("form",{onSubmit:r,children:[Object(O.jsx)("input",{className:"mb-4",name:"name",type:"text",placeholder:"Enter name"}),Object(O.jsx)("input",{className:"mb-4",name:"description",type:"text",placeholder:"Enter description"}),Object(O.jsx)("input",{className:"mb-4 smallWidth",name:"size",type:"number",min:"1",placeholder:"Size"})," cm ",Object(O.jsx)("br",{}),Object(O.jsxs)("select",{className:"mb-4 p-1",name:"location",type:"text",children:[Object(O.jsx)("option",{children:" Select location "}),Object(O.jsx)("option",{value:"sun",children:" sun "}),Object(O.jsx)("option",{value:"shade",children:" shade "}),Object(O.jsx)("option",{value:"sun and shade",children:" sun and shade "})]}),Object(O.jsx)("br",{}),Object(O.jsx)("input",{className:"mb-4 smallWidth",name:"price",type:"number",min:"1",placeholder:"Price"})," \u20ac ",Object(O.jsx)("br",{}),Object(O.jsx)("input",{className:"mb-4",name:"plantImage",type:"file"}),a&&Object(O.jsxs)("p",{className:"warningColor",children:[" ",a," "]}),Object(O.jsxs)("div",{className:"col-12",children:[Object(O.jsx)("button",{className:"btn btn-sm btn-outline-dark",type:"submit",children:" Create "}),Object(O.jsxs)(l.b,{to:"/",children:[" ",Object(O.jsx)("button",{className:"btn btn-sm mx-5",children:" Go back "})," "]})]})]})]})}):Object(O.jsx)(d.a,{to:"/signup"})},k=function(e){var t=e.user,n=e.plant,s=e.headerHeight,a=e.aboutHeight,r=e.onReadPlant,i=e.onDeletePlant,o=Object(d.i)().plantId;if(Object(c.useEffect)((function(){r(o),j.animateScroll.scrollToTop()}),[]),!t)return Object(O.jsx)(d.a,{to:"/signup"});var u=n._id,b=n.name,m=n.description,h=n.size,p=n.image,x=n.imagePublicId,f=n.location,g=n.price,v=n.creator;return v?Object(O.jsxs)("div",{className:"container mt-5 row row-md-10 offset-md-4",children:[Object(O.jsx)("div",{className:"mt-4 mb-3 pt-4 container",children:Object(O.jsx)("h2",{children:" Plant details "})}),Object(O.jsx)("div",{className:"col",children:Object(O.jsxs)("div",{className:"card cardMediumWidth",children:[p&&Object(O.jsx)("img",{className:"card-img-top mediumPicSize",src:p,alt:b}),Object(O.jsxs)("div",{className:"ml-2 mt-2",children:[" ",Object(O.jsx)("span",{children:" Name: "})," ",b," "]}),Object(O.jsxs)("div",{className:"ml-2 mt-2",children:[" ",Object(O.jsx)("span",{children:" Description: "})," ",m," "]}),Object(O.jsxs)("div",{className:"ml-2 mt-2",children:[" ",Object(O.jsx)("span",{children:" Size: "})," ",h," cm "]}),Object(O.jsxs)("div",{className:"ml-2 mt-2",children:[" ",Object(O.jsx)("span",{children:" Likes: "})," ",f," "]}),Object(O.jsxs)("div",{className:"ml-2 mt-2",children:[" ",Object(O.jsx)("span",{children:" Price: "})," ",g," \u20ac "]}),Object(O.jsx)("div",{className:"ml-2 mt-2 col justify-content-center",children:Object(O.jsx)("div",{className:"row-2 justify-content-center",children:Object(O.jsxs)("div",{className:"card-body",children:[t._id===v._id?Object(O.jsxs)("div",{children:[Object(O.jsxs)(l.b,{to:"/plants/update",children:[" ",Object(O.jsx)("button",{className:"btn btn-sm ml-2 btn-outline-dark",children:" Update "})," "]}),Object(O.jsx)("button",{className:"btn btn-sm ml-2 btn-outline-dark",onClick:function(){return i(u,x)},children:" Delete "})]}):Object(O.jsxs)("div",{children:[Object(O.jsxs)(l.b,{to:{pathname:"/plants/checkout",plant:n},children:[" ",Object(O.jsx)("button",{className:"btn btn-sm ml-2 btn-outline-dark",children:" Buy "})," "]}),Object(O.jsxs)(l.b,{to:{pathname:"/requests/create",plant:n},children:[" ",Object(O.jsx)("button",{className:"btn btn-sm ml-2 btn-outline-dark",children:" Swap "})," "]})]}),Object(O.jsxs)(l.b,{to:"/",onClick:function(){return j.animateScroll.scrollTo(s+a)},children:[" ",Object(O.jsx)("button",{className:"btn btn-sm ml-2",children:" Go back "})," "]})]})})})]})})]}):Object(O.jsx)("div",{class:"spinner-grow text-success m-5",role:"status",children:Object(O.jsx)("span",{class:"visually-hidden",children:" Loading... "})})},q=function(e){var t=e.plant,n=e.onImageChange,s=e.onPlantEntryChange,a=e.onUpdatePlant;Object(c.useEffect)((function(){return j.animateScroll.scrollToTop()}),[]);var r=t._id,i=t.name,o=t.description,d=t.size,u=t.image,b=t.price;return Object(O.jsx)("div",{className:"container row mt-5 ",children:Object(O.jsxs)("div",{className:"mt-2 col-11 col-md-5 offset-1 offset-md-5",children:[Object(O.jsx)("h2",{className:"mt-5 mb-4",children:" Update your plant "}),Object(O.jsxs)("div",{className:"card cardSmallWidth mb-5",children:[Object(O.jsx)("img",{className:"mb-2 smallPicSize",src:u,alt:i}),Object(O.jsxs)("div",{className:"card-body",children:[Object(O.jsx)("input",{className:"mb-2",onChange:function(e){return n(e,t)},type:"file"}),Object(O.jsx)("input",{className:"mb-2",type:"text",onChange:function(e){return s(e,0)},value:i}),Object(O.jsx)("input",{className:"mb-2",type:"text",onChange:function(e){return s(e,1)},value:o}),Object(O.jsx)("input",{className:"mb-2 smallWidth",type:"number",onChange:function(e){return s(e,2)},value:d})," cm ",Object(O.jsx)("br",{}),Object(O.jsxs)("select",{className:"mb-2",onChange:function(e){return s(e,3)},name:"location",type:"text",placeholder:"Select",children:[Object(O.jsx)("option",{value:"sun",children:" sun "}),Object(O.jsx)("option",{value:"shade",children:" shade "}),Object(O.jsx)("option",{value:"sun and shade",children:" sun and shade "})]})," ",Object(O.jsx)("br",{}),Object(O.jsx)("input",{className:"mb-4 smallWidth",name:"price",type:"number",min:"1",onChange:function(e){return s(e,4)},value:b})," \u20ac",Object(O.jsxs)("div",{className:"row justify-content-around",children:[Object(O.jsx)("button",{className:"btn btn-sm btn-outline-dark",onClick:function(){return a(t)},children:" Save changes "}),Object(O.jsxs)(l.b,{to:"/plants/read/".concat(r),children:[" ",Object(O.jsx)("button",{className:"btn btn-sm mx-2",children:" Go back "})," "]})]})]})]})]})})},E=n(55),I=n(20),P=n(22),T=n.n(P),R=n(37),H=function(e){var t=e.plant,n=e.headerHeight,s=e.aboutHeight,a=e.onCheckout,r=Object(c.useState)(!1),i=Object(o.a)(r,2),d=i[0],b=i[1],m=Object(c.useState)(!1),h=Object(o.a)(m,2),p=h[0],x=h[1],f=Object(c.useState)(!0),g=Object(o.a)(f,2),v=g[0],N=g[1],y=Object(c.useState)(""),w=Object(o.a)(y,2),S=w[0],C=w[1],k=Object(c.useState)(null),q=Object(o.a)(k,2),E=q[0],P=q[1],H=Object(I.useStripe)(),_=Object(I.useElements)();Object(c.useEffect)((function(){return window.fetch("".concat(u,"/api/create-payment-intent"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({price:t.price})}).then((function(e){return e.json()})).then((function(e){return C(e.clientSecret)})),function(){return j.animateScroll.scrollTo(n+s)}}),[]);var D=function(){var e=Object(R.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N(t.empty),P(t.error?t.error.message:"");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(R.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),x(!0),e.next=4,H.confirmCardPayment(S,{payment_method:{card:_.getElement(I.CardElement)}});case 4:(n=e.sent).error?(P("Payment failed ".concat(n.error.message)),x(!1)):(P(null),x(!1),b(!0));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=t._id,U=t.name,G=t.price;return Object(O.jsxs)("div",{className:"container col-9",children:[Object(O.jsxs)("form",{className:"checkoutForm mt-5",id:"payment-form",onSubmit:z,children:[Object(O.jsxs)("h2",{className:"text-center mb-2 p-2",children:[" ",U," "]}),Object(O.jsxs)("h3",{className:"text-center mb-4 p-2",children:[" ",G," \u20ac "]}),Object(O.jsx)(I.CardElement,{className:"p-2",id:"card-element",options:{style:{base:{color:"#32325d",fontFamily:"Arial, sans-serif",fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#32325d"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}},onChange:D}),Object(O.jsx)("div",{className:"row justify-content-center",children:Object(O.jsx)("button",{onClick:a,className:"btn btn-sm mt-5 mb-4",disabled:p||v||d,id:"submit",children:Object(O.jsx)("span",{id:"button-text",children:p?Object(O.jsx)("div",{className:"spinner",id:"spinner"}):"Pay now"})})}),E&&Object(O.jsxs)("div",{className:"card-error",role:"alert",children:[" ",E," "]}),Object(O.jsx)("p",{className:d?"result-message text-center":"result-message hidden text-center",children:"Payment succeeded."})]}),Object(O.jsx)("div",{className:"row justify-content-center",children:d?Object(O.jsxs)(l.b,{to:"/",children:[" ",Object(O.jsx)("button",{className:"btn btn-sm",children:" Go back "})," "]}):Object(O.jsxs)(l.b,{to:"/plants/read/".concat(F),children:[" ",Object(O.jsx)("button",{className:"btn btn-sm",children:" Go back "})," "]})})]})},_=Object(E.a)("pk_test_51IQBsPA6EAM4YnfDyrjHWnLHzZ5KkI9tsERzYhBGVoctZBrFUb4Sda035HvcQKpp7thFiqW6QmO8ytPbOAMTg33z00cHvcbojv"),D=function(e){var t=e.headerHeight,n=e.aboutHeight,s=e.onCheckout,a=Object(d.h)();Object(c.useEffect)((function(){return j.animateScroll.scrollToTop()}),[]);var r=a.plant;return Object(O.jsx)("div",{className:"container row mt-5",children:Object(O.jsx)("div",{className:"mt-5 col-11 col-md-6 offset-1 offset-md-5 App",children:Object(O.jsx)(I.Elements,{stripe:_,children:Object(O.jsx)(H,{onCheckout:s,plant:r,headerHeight:t,aboutHeight:n})})})})},z=function(e){var t=e.user,n=e.requests,s=e.amountOfRequests,a=e.onFetchAllRequests,r=e.onClearNewRequest;return Object(c.useEffect)((function(){var e=function(){r(),j.animateScroll.scrollToTop()};return a(),e(),function(){return e()}}),[]),t?n?Object(O.jsx)("div",{className:"container row mt-5",children:Object(O.jsxs)("div",{className:"mt-5 col-11 col-md-5 offset-1 offset-md-5",children:[Object(O.jsx)("h2",{children:" Your messages "}),Object(O.jsxs)("h3",{className:"mb-4",children:[" [",s,"] "]}),Object(O.jsxs)(l.b,{to:"/",children:[" ",Object(O.jsx)("button",{className:"btn btn-sm mt-4",children:" Go back "})," "]}),n.map((function(e){var n=e._id,c=e.buyer,s=e.seller,a=e.plant;return s._id===t._id&&Object(O.jsxs)("div",{className:"card p-3 mt-4 ",children:[Object(O.jsxs)("h4",{children:[" Request for: ",a.name," "]}),Object(O.jsxs)("h5",{children:[" by: ",c.username," "]}),Object(O.jsx)("div",{children:Object(O.jsx)(l.b,{className:"btn btn-outline-dark",to:"/requests/read/".concat(n),children:" Details "})})]},n)})),0!==s&&Object(O.jsxs)(l.b,{to:"/",children:[" ",Object(O.jsx)("button",{className:"btn btn-sm mt-4",children:" Go back "})," "]})]})}):Object(O.jsx)("div",{class:"spinner-grow text-success m-5",role:"status",children:Object(O.jsx)("span",{class:"visually-hidden",children:" Loading... "})}):Object(O.jsx)(d.a,{to:"/signup"})},F=function(e){var t=e.error,n=e.onCreateRequest,s=e.onClearError,a=Object(d.h)();Object(c.useEffect)((function(){s(),j.animateScroll.scrollToTop()}),[]);var r=a.plant;return Object(O.jsx)("div",{className:"container row mt-5",children:Object(O.jsxs)("div",{className:"mt-5 col-11 col-md-5 offset-1 offset-md-5",children:[Object(O.jsx)("h2",{className:"mb-4",children:" Your mesage "}),Object(O.jsxs)("h3",{className:"mb-4",children:[" ",r.name," "]}),Object(O.jsxs)("form",{onSubmit:function(e){return n(e,r)},children:[Object(O.jsx)("div",{children:Object(O.jsx)("textarea",{className:"mb-4",name:"message",cols:"35",rows:"7"})}),t&&Object(O.jsxs)("p",{className:"warningColor",children:[" ",t," "]}),Object(O.jsx)("button",{className:"btn btn-sm btn-outline-dark",type:"submit",children:" Send "}),Object(O.jsxs)(l.b,{to:"/plants/read/".concat(r._id),children:[" ",Object(O.jsx)("button",{className:"btn btn-sm mx-2",children:" Go back "})," "]})]})]})})},U=function(e){var t=e.request,n=e.onReadRequest,s=e.onDeleteRequest,a=Object(d.i)().requestId;Object(c.useEffect)((function(){n(a),j.animateScroll.scrollToTop()}),[]);var r=t._id,i=t.buyer,o=t.plant,u=t.message,b=t.reply;return i&&o?Object(O.jsx)("div",{className:"container row mt-5 ",children:Object(O.jsxs)("div",{className:"mt-5 col-11 col-md-5 offset-1 offset-md-5",children:[Object(O.jsx)("h2",{className:"mb-5",children:" Your request "}),Object(O.jsxs)("h4",{children:[" for: ",o.name," "]}),Object(O.jsxs)("h5",{children:[" by: ",i.username," "]}),Object(O.jsxs)("p",{children:[" ",u," "]}),b&&Object(O.jsxs)("div",{children:[Object(O.jsx)("h5",{children:" Your reply: "}),Object(O.jsxs)("p",{children:[" ",b," "]})]}),Object(O.jsxs)("div",{children:[!b&&Object(O.jsxs)(l.b,{to:"/requests/update/".concat(r),children:[" ",Object(O.jsx)("button",{className:"btn btn-sm ml-2 btn-outline-dark",children:" Reply "})," "]}),Object(O.jsx)("button",{className:"btn btn-sm ml-2 btn-outline-dark",onClick:function(){return s(r)},children:" Delete "})]}),Object(O.jsxs)(l.b,{to:"/requests/fetch",onClick:j.animateScroll.scrollToTop,children:[" ",Object(O.jsx)("button",{className:"btn btn-sm mt-4",children:" Go back "})," "]})]})}):Object(O.jsx)("div",{class:"spinner-grow text-success m-5",role:"status",children:Object(O.jsx)("span",{class:"visually-hidden",children:" Loading... "})})},G=function(e){var t=e.request,n=e.onCreateReply,s=e.onUpdateRequest;Object(c.useEffect)((function(){return j.animateScroll.scrollToTop()}),[]);var a=t._id,r=t.message;return Object(O.jsx)("div",{className:"container row mt-5 ",children:Object(O.jsxs)("div",{className:"mt-2 col-11 col-md-5 offset-1 offset-md-5",children:[Object(O.jsx)("h2",{className:"mt-5 mb-4",children:" Reply your request "}),Object(O.jsx)("div",{className:"card cardSmallWidth mb-5",children:Object(O.jsxs)("div",{className:"card-body",children:[Object(O.jsxs)("p",{children:[" ",r," "]}),Object(O.jsx)("textarea",{className:"mb-4",name:"reply",cols:"31",rows:"6",placeholder:"Your reply",onChange:n}),Object(O.jsxs)("div",{className:"row justify-content-around",children:[Object(O.jsx)("button",{className:"btn btn-sm btn-outline-dark",onClick:function(){return s(t)},children:" Submit "}),Object(O.jsxs)(l.b,{to:"/requests/read/".concat(a),children:[" ",Object(O.jsx)("button",{className:"btn btn-sm mx-2",children:" Go back "})," "]})]})]})})]})})},J=function(){return Object(O.jsx)("div",{className:"notFound",children:Object(O.jsxs)("div",{children:[Object(O.jsxs)("h2",{children:["Oh-oh! ",Object(O.jsx)("br",{})," ",Object(O.jsx)("br",{}),"We think you got lost in the jungle!"]}),Object(O.jsx)("h3",{children:" 404 Not Found "}),Object(O.jsxs)(l.b,{to:"/",children:[" ",Object(O.jsx)("button",{className:"btn btn-sm ml-2",children:" Take me home "})," "]})]})})},L=function(){return Object(c.useEffect)((function(){!function(e,t){var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="https://widget.kommunicate.io/v2/kommunicate.app",document.getElementsByTagName("head")[0].appendChild(n),window.kommunicate=t,t._globals={appId:"10b22c52854a305b79bbdecc356bea5",popupWidget:!0,automaticChatOpenOnNavigation:!0}}(document,window.kommunicate||{})}),[]),Object(O.jsx)("div",{})},W=Object(d.j)((function(){var e=Object(c.useState)(!0),t=Object(o.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(null),r=Object(o.a)(a,2),l=r[0],b=r[1],h=Object(c.useState)(!1),p=Object(o.a)(h,2),g=p[0],v=p[1],E=Object(c.useState)([]),I=Object(o.a)(E,2),P=I[0],T=I[1],R=Object(c.useState)(""),H=Object(o.a)(R,2),_=H[0],W=H[1],A=Object(c.useState)({}),M=Object(o.a)(A,2),B=M[0],Y=M[1],Q=Object(c.useState)([]),K=Object(o.a)(Q,2),Z=K[0],V=K[1],X=Object(c.useState)({}),$=Object(o.a)(X,2),ee=$[0],te=$[1],ne=Object(c.useState)(0),ce=Object(o.a)(ne,2),se=ce[0],ae=ce[1],re=Object(c.useState)(!1),le=Object(o.a)(re,2),ie=le[0],oe=le[1],de=Object(c.useState)(null),je=Object(o.a)(de,2),ue=je[0],be=je[1],me=Object(c.useState)(0),he=Object(o.a)(me,2),pe=he[0],Oe=he[1],xe=Object(c.useState)(0),fe=Object(o.a)(xe,2),ge=fe[0],ve=fe[1],Ne=Object(c.useState)(0),ye=Object(o.a)(Ne,2),we=ye[0],Se=ye[1],Ce=Object(c.useState)(null),ke=Object(o.a)(Ce,2),qe=ke[0],Ee=ke[1],Ie=Object(d.g)(),Pe="".concat(u,"/api"),Te=function(){return Ee(null)},Re=function(){m.a.get("".concat(Pe,"/plants/fetch")).then((function(e){return T(e.data)})).catch((function(e){return console.log("Fetching plants failed",e)}))};Object(c.useEffect)((function(){return Re(),l||m.a.get("".concat(Pe,"/user"),{withCredentials:!0}).then((function(e){b(e.data),s(!1)})).catch((function(e){s(!1),console.log("Initializing fetching failed",e)})),function(){return ue&&clearInterval(ue)}}),[]);Object(c.useEffect)((function(){_?m.a.get("".concat(Pe,"/plants/search?q=").concat(_)).then((function(e){return T(e.data)})).catch((function(e){return console.log("Query fetching failed",e)})):Re()}),[_]);Object(c.useEffect)((function(){g&&(v(!1),m.a.get("".concat(Pe,"/requests/fetch")).then((function(e){V(e.data),ae(Z.filter((function(e){return e.seller._id===l._id})).length),be(setInterval((function(){return Oe((function(e){return e+1}))}),1e4))})).catch((function(e){return console.log("Checking requests failed",e)})))}),[g]),Object(c.useEffect)((function(){m.a.get("".concat(Pe,"/requests/fetch")).then((function(e){V(e.data);var t=Z.filter((function(e){return e.seller._id===l._id})).length;se<t&&(ae(t),oe(!0))})).catch((function(e){return console.log("Checking requests failed",e)}))}),[pe]);var He=function(){return oe(!1)},_e=function(){m.a.post("".concat(Pe,"/logout"),{},{withCredentials:!0}).then((function(){b(null),clearInterval(ue),Ie.push("/")})).catch((function(e){return console.log("Logout failed",e)}))};return n?Object(O.jsx)("div",{class:"spinner-grow text-success m-5",role:"status",children:Object(O.jsx)("span",{class:"visually-hidden",children:" Loading... "})}):Object(O.jsxs)("div",{class:"main",children:[Object(O.jsx)(x,{onLogOut:_e,isNewRequest:ie,user:l,headerHeight:ge,aboutHeight:we}),Object(O.jsxs)(d.d,{children:[Object(O.jsx)(d.b,{exact:!0,path:"/",children:Object(O.jsx)(N,{onSearchPlant:function(e){return W(e.target.value)},onGetElementsHeight:function(){ve(Math.round(document.querySelector("#titleId").getBoundingClientRect().height)),Se(Math.round(document.querySelector("#aboutId").getBoundingClientRect().height))},plants:P,query:_,headerHeight:ge})}),Object(O.jsx)(d.b,{path:"/plants/create",children:Object(O.jsx)(C,{onCreatePlant:function(e){e.preventDefault();var t=e.target,n=t.name,c=t.description,s=t.size,a=t.plantImage,r=t.location,l=t.price,o=a.files[0],d=new FormData;d.append("image",o),m.a.post("".concat(Pe,"/upload"),d).then((function(e){var t=e.data,a=t.image,o=t.imagePublicId,d={name:n.value,description:c.value,size:s.value,image:a,imagePublicId:o,location:r.value,price:l.value};m.a.post("".concat(Pe,"/plants/create"),d,{withCredentials:!0}).then((function(e){T([e.data].concat(Object(i.a)(P))),Ie.push("/")})).catch((function(e){return Ee(e.response.data.error)}))})).catch((function(e){return Ee(e.response.data.error)}))},onClearError:Te,user:l,headerHeight:ge,aboutHeight:we,error:qe})}),Object(O.jsx)(d.b,{path:"/plants/read/:plantId",children:Object(O.jsx)(k,{onReadPlant:function(e){m.a.get("".concat(Pe,"/plants/read/").concat(e),{withCredentials:!0}).then((function(e){return Y(e.data)})).catch((function(){return console.log("Read plant failed")}))},onDeletePlant:function(e,t){var n={imagePublicId:t};m.a.post("".concat(Pe,"/destroy"),n).then((function(){m.a.delete("".concat(Pe,"/plants/delete/").concat(e)).then((function(){T(P.filter((function(t){return t._id!==e}))),Ie.push("/"),j.animateScroll.scrollTo(ge+we)})).catch((function(e){return console.log("Delete plant failed",e)}))})).catch((function(e){return console.log("Delete image failed",e)}))},plant:B,user:l,headerHeight:ge,aboutHeight:we})}),Object(O.jsx)(d.b,{path:"/plants/update",children:Object(O.jsx)(q,{onImageChange:function(e,t){var n=e.target.files[0],c={imagePublicId:t.imagePublicId};m.a.post("".concat(Pe,"/destroy"),c).then((function(){var e=new FormData;e.append("image",n),m.a.post("".concat(Pe,"/upload"),e).then((function(e){var n=JSON.parse(JSON.stringify(t)),c=e.data,s=c.imagePublicId,a=c.image;n.imagePublicId=s,n.image=a,Y(n)})).catch((function(e){return console.log("Image upload failed",e)}))})).catch((function(e){return console.log("Delete old image failed",e)}))},onPlantEntryChange:function(e,t){var n=e.target,c=JSON.parse(JSON.stringify(B));switch(t){case 0:c.name=n.value;break;case 1:c.description=n.value;break;case 2:c.size=n.value;break;case 3:c.location=n.value;break;case 4:c.price=n.value}Y(c)},onUpdatePlant:function(e){var t=e._id,n=e.name,c=e.description,s=e.size,a=e.image,r=e.imagePublicId,l=e.location,i=e.price,o={name:n,description:c,size:s,image:a,imagePublicId:r,location:l,price:i};m.a.patch("".concat(Pe,"/plants/update/").concat(t),o).then((function(){T(P.map((function(e){return e._id===t&&(e.name=n,e.description=c,e.size=s,e.image=a,e.imagePublicId=r,e.location=l,e.price=i),e}))),Ie.push("/"),j.animateScroll.scrollTo(ge+we)})).catch((function(e){return console.log("Update plant failed",e)}))},plant:B,headerHeight:ge,aboutHeight:we})}),Object(O.jsx)(d.b,{path:"/plants/checkout",children:Object(O.jsx)(D,{onCheckout:function(){m.a.post("".concat(Pe,"/create-payment-intent"),{},{withCredentials:!0}).then((function(){return Ie.push("/")})).catch((function(e){return console.log("Checkout failed",e)}))},headerHeight:ge,aboutHeight:we})}),Object(O.jsx)(d.b,{path:"/requests/fetch",children:Object(O.jsx)(z,{onFetchAllRequests:function(){m.a.get("".concat(Pe,"/requests/fetch")).then((function(e){return V(e.data)})).catch((function(e){return console.log("Fetching requests failed",e)}))},onClearNewRequest:He,user:l,requests:Z,amountOfRequests:se})}),Object(O.jsx)(d.b,{path:"/requests/create",children:Object(O.jsx)(F,{onCreateRequest:function(e,t){var n=t._id,c=t.creator;e.preventDefault();var s=e.target.message,a={seller:c._id,plant:n,message:s.value};m.a.post("".concat(Pe,"/requests/create"),a,{withCredentials:!0}).then((function(e){V([e.data].concat(Object(i.a)(Z))),Ie.push("/plants/read/".concat(n))})).catch((function(e){return Ee(e.response.data.error)}))},onClearError:Te,user:l,error:qe})}),Object(O.jsx)(d.b,{path:"/requests/read/:requestId",children:Object(O.jsx)(U,{onReadRequest:function(e){m.a.get("".concat(Pe,"/requests/read/").concat(e),{withCredentials:!0}).then((function(e){return te(e.data)})).catch((function(){return console.log("Read request failed")}))},onDeleteRequest:function(e){m.a.delete("".concat(Pe,"/requests/delete/").concat(e)).then((function(){V(Z.filter((function(t){return t._id!==e}))),ae((function(e){return e-1})),Ie.push("/requests/fetch")})).catch((function(e){return console.log("Delete request failed",e)}))},request:ee,user:l})}),Object(O.jsx)(d.b,{path:"/requests/update",children:Object(O.jsx)(G,{onCreateReply:function(e){var t=JSON.parse(JSON.stringify(ee));t.reply=e.target.value,te(t)},onUpdateRequest:function(e){var t=e._id,n=e.buyer,c=e.seller,s=e.plant,a=e.message,r=e.reply,l={buyer:n,seller:c,plant:s,message:a,reply:r};m.a.patch("".concat(Pe,"/requests/update/").concat(t),l).then((function(){V(Z.map((function(e){return e._id===t&&(e.buyer=n,e.seller=c,e.plant=s,e.message=a,e.reply=r),e}))),Ie.push("/requests/read/".concat(t))})).catch((function(e){return console.log("Update request failed",e)}))},request:ee})}),Object(O.jsx)(d.b,{path:"/signup",children:Object(O.jsx)(y,{onSignUp:function(e){e.preventDefault();var t=e.target,n=t.username,c=t.email,s=t.password,a={username:n.value,email:c.value.toLowerCase(),password:s.value};m.a.post("".concat(Pe,"/signup"),a).then((function(e){b(e.data),v(!0),Ie.push("/")})).catch((function(e){return Ee(e.response.data.error)}))},onClearError:Te,onClearNewRequest:He,error:qe})}),Object(O.jsx)(d.b,{path:"/signin",children:Object(O.jsx)(w,{onSignIn:function(e){e.preventDefault();var t=e.target,n=t.email,c=t.password,s={email:n.value,password:c.value};m.a.post("".concat(Pe,"/signin"),s,{withCredentials:!0}).then((function(e){b(e.data),v(!0),Ie.push("/")})).catch((function(e){return Ee(e.response.data.error)}))},onClearError:Te,onClearNewRequest:He,error:qe})}),Object(O.jsx)(d.b,{path:"/logout",children:Object(O.jsx)(S,{onLogOut:_e,onClearNewRequest:He})}),Object(O.jsx)(d.b,{component:J})]}),Object(O.jsx)(L,{}),Object(O.jsx)(f,{})]})}));n(96);r.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(l.a,{children:Object(O.jsx)(W,{})})}),document.querySelector("#root"))}},[[97,1,2]]]);
//# sourceMappingURL=main.c28d0c4b.chunk.js.map