{"version":3,"sources":["hooks.ts","reducer/jungleSwapSlice.ts","config.ts","components/NavBar.tsx","components/Footer.tsx","images/JungleSwap_Home.png","images/JungleSwap_Icon.png","components/About.tsx","components/PlantThumbnail.tsx","components/AllPlants.tsx","components/Title.tsx","components/LoadingSpinner.tsx","screens/Home.tsx","screens/SignUp.tsx","screens/SignIn.tsx","components/LogOut.tsx","screens/CreatePlantForm.tsx","screens/PlantDetails.tsx","screens/UpdatePlantForm.tsx","components/CheckoutForm.tsx","screens/CheckoutPage.tsx","components/RequestTile.tsx","screens/RequestsPage.tsx","components/ReplyTile.tsx","screens/RepliesPage.tsx","screens/CreateRequestForm.tsx","screens/RequestDetails.tsx","screens/ReplyDetails.tsx","screens/UpdateRequestForm.tsx","screens/Unauthorized.tsx","screens/NotFound.tsx","components/Chat.tsx","App.tsx","store.ts","index.tsx"],"names":["useAppDispatch","useDispatch","useAppSelector","useSelector","apiPath","process","rejectWithValue","data","Error","fetchAllPlants","createAsyncThunk","a","axios","get","response","error","fetchQueryPlants","query","uploadPlantImage","uploadForm","post","createPlant","newPlant","withCredentials","readPlant","plantId","updatePlant","updatedPlant","patch","deletePlantImage","destroyImageData","deletePlant","delete","createPayment","plant","price","fetchAllMessages","createMessage","newMessage","readMessage","messageId","updateMessage","updatedMessage","deleteMessage","signUp","newUser","signIn","user","logOut","checkUserLoggedIn","jungleSwapSlice","createSlice","name","initialState","loggedInUser","isUserChange","isFetchingPlant","isFetchingPlants","isUploadingImage","plants","isFetchingMessage","isFetchingMessages","messages","message","amountOfRequests","amountOfReplies","isNewRequest","isNewReply","intervalId","delayCounter","headerContainerHeight","aboutContainerHeight","clientSecret","reducers","setUser","state","action","payload","setPlants","setPlant","addPlant","push","setPlantChanges","_id","description","size","imageUrl","imagePublicId","location","map","singlePlant","removePlant","filter","setClientSecret","setMessages","setMessage","addMessage","setMessageChanges","buyer","seller","request","reply","messageState","singleMessage","removeMessage","setStartAmountOfRequests","setStartAmountOfReplies","setAmountOfRequests","setAmountOfReplies","setIsNewRequest","setIsNewReply","setIntervalId","setDelayCounter","increaseDelayCounter","decreaseAmountOfRequests","decreaseAmountOfReplies","setLoggedInUser","setIsUserChange","setError","setHeaderContainerHeight","setAboutContainerHeight","scrollToAbout","scroll","scrollTo","scrollToPlants","extraReducers","builder","addCase","fulfilled","actions","NavBar","jungleSwap","dispatch","useEffect","clearInterval","unwrap","then","setInterval","catch","rejectedValue","console","log","currentAmountOfRequests","length","currentAmountOfReplies","Navbar","className","variant","expand","fixed","Brand","to","onClick","scrollToTop","Toggle","aria-controls","icon","faBell","Collapse","id","Nav","title","username","Footer","About","src","image","alt","PlantThumbnail","AllPlants","useState","setQuery","type","placeholder","value","onChange","event","target","index","Title","LoadingSpinner","spinnerText","role","Home","elementRef","useRef","headerElementHeight","Math","round","current","getBoundingClientRect","height","aboutElementHeight","ref","headerElement","aboutElement","SignUp","history","useHistory","onSubmit","preventDefault","email","password","toLowerCase","handleSignUp","htmlFor","formNoValidate","SignIn","handleSignIn","LogOut","clonedUser","JSON","parse","stringify","CreatePlantForm","plantImage","files","FormData","append","scrollToBottom","handleCreatePlant","min","PlantDetails","useParams","creator","forEach","handleDeletePlant","UpdatePlantForm","handlePlantEntryChange","itemNumber","clonedPlant","handleImageChange","handleUpdatePlant","CheckoutForm","isSucceeded","setIsSucceeded","isProcessing","setIsProcessing","isDisabled","setIsDisabled","paymentError","setPaymentError","stripe","useStripe","elements","useElements","payment","handleChange","empty","handleSubmitPayment","confirmCardPayment","payment_method","card","getElement","CardElement","options","style","base","color","fontFamily","fontSmoothing","fontSize","invalid","iconColor","disabled","stripePromise","loadStripe","CheckoutPage","RequestThumbnail","RequestsPage","handleResetAll","RequestTile","ReplyThumbnail","RepliesPage","ReplyTile","CreateRequestForm","handleCreateMessage","cols","rows","RequestDetails","clonedMessage","handleSetMessageInactive","ReplyDetails","UpdateRequestForm","handleCreateReply","handleUpdateMessage","Unauthorized","NotFound","KommunicateChat","d","m","s","document","createElement","async","getElementsByTagName","appendChild","window","kommunicate","_globals","appId","popupWidget","automaticChatOpenOnNavigation","withRouter","exact","path","component","store","configureStore","reducer","ReactDOM","render","StrictMode","querySelector"],"mappings":"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","file":"static/js/main.67097ccb.chunk.js","sourcesContent":["import { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\r\nimport type { RootState, AppDispatch } from \"./store\";\r\n\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;","import { createAsyncThunk, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport config from \"../config\";\r\nimport axios from \"axios\";\r\nimport { animateScroll as scroll } from \"react-scroll\";\r\n\r\nconst apiPath = `${config.API_URL}/api`;\r\n\r\nexport interface User {\r\n  _id?: string;\r\n  username?: string;\r\n  email: string;\r\n  password: string;\r\n  amountOfRequests?: number;\r\n  amountOfReplies?: number;\r\n}\r\n\r\nexport interface MessageCounters {\r\n  amountOfRequests?: number;\r\n  amountOfReplies?: number;\r\n}\r\n\r\nexport interface Plant {\r\n  _id?: string;\r\n  name?: string;\r\n  description?: string;\r\n  size?: number;\r\n  imageUrl?: string;\r\n  imagePublicId?: string;\r\n  location?: string;\r\n  price?: number;\r\n  creator?: string | User | undefined;\r\n}\r\n\r\nexport interface Message {\r\n  _id?: string;\r\n  buyer?: string | User | undefined;\r\n  seller?: string | User | undefined;\r\n  plant?: string | Plant | undefined;\r\n  request?: string;\r\n  reply?: string;\r\n  messageState?: boolean;\r\n}\r\n\r\nexport interface DestroyImageData {\r\n  imagePublicId: ImagePublicId;\r\n}\r\n\r\nexport type LoggedInUser = User | null;\r\nexport type IntervalId = NodeJS.Timer | null;\r\nexport type Error = string | null;\r\nexport type PlantId = string | undefined;\r\nexport type ImagePublicId = string | undefined;\r\nexport type MessageId = string | undefined;\r\n\r\ninterface SliceState {\r\n  loggedInUser: LoggedInUser;\r\n  isUserChange: boolean;\r\n  isFetchingPlant: boolean;\r\n  isFetchingPlants: boolean;\r\n  isUploadingImage: boolean;\r\n  plants: Plant[];\r\n  plant: Plant | {};\r\n  isFetchingMessage: boolean;\r\n  isFetchingMessages: boolean;\r\n  messages: Message[];\r\n  message: Message | {};\r\n  amountOfRequests: number;\r\n  amountOfReplies: number;\r\n  isNewRequest: boolean;\r\n  isNewReply: boolean;\r\n  intervalId: IntervalId;\r\n  delayCounter: number;\r\n  headerContainerHeight: number;\r\n  aboutContainerHeight: number;\r\n  clientSecret: string;\r\n  error: Error;\r\n}\r\n\r\nconst initialState: SliceState = {\r\n  loggedInUser: null,\r\n  isUserChange: false,\r\n  isFetchingPlant: true,\r\n  isFetchingPlants: true,\r\n  isUploadingImage: true,\r\n  plants: [],\r\n  plant: {},\r\n  isFetchingMessage: true,\r\n  isFetchingMessages: true,\r\n  messages: [],\r\n  message: {},\r\n  amountOfRequests: 0,\r\n  amountOfReplies: 0,\r\n  isNewRequest: false,\r\n  isNewReply: false,\r\n  intervalId: null,\r\n  delayCounter: 0,\r\n  headerContainerHeight: 0,\r\n  aboutContainerHeight: 0,\r\n  clientSecret: \"\",\r\n  error: null,\r\n};\r\n\r\nconst rejectWithValue = (data: any): void | PromiseLike<void> => {\r\n  throw new Error(data);\r\n};\r\n\r\n// --------- Plants ---------\r\n// Fetch all plants\r\nexport const fetchAllPlants = createAsyncThunk(\r\n  \"jungleSwap/fetchAllPlants\",\r\n  async () => {\r\n    try {\r\n      const response = await axios.get(`${apiPath}/plants/fetch`);\r\n      return response.data;\r\n    } catch (err: any) {\r\n      return rejectWithValue(err.response.data.error);\r\n    }\r\n  }\r\n);\r\n\r\n// Fetch query plants\r\nexport const fetchQueryPlants = createAsyncThunk(\r\n  \"jungleSwap/fetchQueryPlants\",\r\n  async (query: string) => {\r\n    try {\r\n      const response = await axios.get(`${apiPath}/plants/search?q=${query}`);\r\n      return response.data;\r\n    } catch (err: any) {\r\n      return rejectWithValue(err.response.data.error);\r\n    }\r\n  }\r\n);\r\n\r\n// Upload plant image\r\nexport const uploadPlantImage = createAsyncThunk(\r\n  \"jungleSwap/uploadPlantImage\",\r\n  async (uploadForm: FormData) => {\r\n    try {\r\n      const response = await axios.post(`${apiPath}/cloudinary/upload`, uploadForm);\r\n      return response.data;\r\n    } catch (err: any) {\r\n      return rejectWithValue(err.response.data.error);\r\n    }\r\n  }\r\n);\r\n\r\n// Create plant\r\nexport const createPlant = createAsyncThunk(\r\n  \"jungleSwap/createPlant\",\r\n  async (newPlant: Plant) => {\r\n    try {\r\n      const response = await axios.post(`${apiPath}/plants/create`, newPlant, {\r\n        withCredentials: true,\r\n      });\r\n      return response.data;\r\n    } catch (err: any) {\r\n      return rejectWithValue(err.response.data.error);\r\n    }\r\n  }\r\n);\r\n\r\n// Read plant\r\nexport const readPlant = createAsyncThunk(\r\n  \"jungleSwap/readPlant\",\r\n  async (plantId: PlantId) => {\r\n    try {\r\n      const response = await axios.get(`${apiPath}/plants/read/${plantId}`, {\r\n        withCredentials: true,\r\n      });\r\n      return response.data;\r\n    } catch (err: any) {\r\n      return rejectWithValue(err.response.data.error);\r\n    }\r\n  }\r\n);\r\n\r\n// Update plant\r\ninterface UpdatePlantParameters {\r\n  plantId: PlantId;\r\n  updatedPlant: Plant;\r\n}\r\n\r\nexport const updatePlant = createAsyncThunk(\r\n  \"jungleSwap/updatePlant\",\r\n  async ({ plantId, updatedPlant }: UpdatePlantParameters) => {\r\n    try {\r\n      const response = await axios.patch(\r\n        `${apiPath}/plants/update/${plantId}`,\r\n        updatedPlant\r\n      );\r\n      return response.data;\r\n    } catch (err: any) {\r\n      return rejectWithValue(err.response.data.error);\r\n    }\r\n  }\r\n);\r\n\r\n// Delete plant image\r\nexport const deletePlantImage = createAsyncThunk(\r\n  \"jungleSwap/deletePlantImage\",\r\n  async (destroyImageData: DestroyImageData) => {\r\n    try {\r\n      await axios.post(`${apiPath}/cloudinary/destroy`, destroyImageData);\r\n    } catch (err: any) {\r\n      return rejectWithValue(err.response.data.error);\r\n    }\r\n  }\r\n);\r\n\r\n// Delete Plant\r\nexport const deletePlant = createAsyncThunk(\r\n  \"jungleSwap/deletePlant\",\r\n  async (plantId: PlantId) => {\r\n    try {\r\n      await axios.delete(`${apiPath}/plants/delete/${plantId}`);\r\n    } catch (err: any) {\r\n      return rejectWithValue(err.response.data.error);\r\n    }\r\n  }\r\n);\r\n\r\n// Create plant payment\r\nexport const createPayment = createAsyncThunk(\r\n  \"jungleSwap/createPayment\",\r\n  async (plant: Plant) => {\r\n    try {\r\n      const response = await axios.post(`${apiPath}/stripe/create-payment-intent`, {\r\n        price: plant.price,\r\n      });\r\n      return response.data;\r\n    } catch (err: any) {\r\n      return rejectWithValue(err.response.data.error);\r\n    }\r\n  }\r\n);\r\n\r\n// --------- Messages ----------\r\n// Fetch all messages\r\nexport const fetchAllMessages = createAsyncThunk(\r\n  \"jungleSwap/fetchAllMessages\",\r\n  async () => {\r\n    try {\r\n      const response = await axios.get(`${apiPath}/messages/fetch`);\r\n      return response.data;\r\n    } catch (err: any) {\r\n      return rejectWithValue(err.response.data.error);\r\n    }\r\n  }\r\n);\r\n\r\n// Create messages\r\nexport const createMessage = createAsyncThunk(\r\n  \"jungleSwap/createMessage\",\r\n  async (newMessage: Message) => {\r\n    try {\r\n      const response = await axios.post(\r\n        `${apiPath}/messages/create`,\r\n        newMessage,\r\n        { withCredentials: true }\r\n      );\r\n      return response.data;\r\n    } catch (err: any) {\r\n      return rejectWithValue(err.response.data.error);\r\n    }\r\n  }\r\n);\r\n\r\n// Read message\r\nexport const readMessage = createAsyncThunk(\r\n  \"jungleSwap/readMessage\",\r\n  async (messageId: MessageId) => {\r\n    try {\r\n      const response = await axios.get(\r\n        `${apiPath}/messages/read/${messageId}`,\r\n        { withCredentials: true }\r\n      );\r\n      return response.data;\r\n    } catch (err: any) {\r\n      return rejectWithValue(err.response.data.error);\r\n    }\r\n  }\r\n);\r\n\r\n// Update message\r\ninterface UpdateMessageParameters {\r\n  messageId: MessageId;\r\n  updatedMessage: Message;\r\n}\r\n\r\nexport const updateMessage = createAsyncThunk(\r\n  \"jungleSwap/updateMessage\",\r\n  async ({ messageId, updatedMessage }: UpdateMessageParameters) => {\r\n    try {\r\n      const response = await axios.patch(\r\n        `${apiPath}/messages/update/${messageId}`,\r\n        updatedMessage\r\n      );\r\n      return response.data;\r\n    } catch (err: any) {\r\n      return rejectWithValue(err.response.data.error);\r\n    }\r\n  }\r\n);\r\n\r\n// Delete message\r\nexport const deleteMessage = createAsyncThunk(\r\n  \"jungleSwap/deleteMessage\",\r\n  async (messageId: MessageId) => {\r\n    try {\r\n      await axios.delete(`${apiPath}/messages/delete/${messageId}`);\r\n    } catch (err: any) {\r\n      return rejectWithValue(err.response.data.error);\r\n    }\r\n  }\r\n);\r\n\r\n// ---------- User authentification ----------\r\n// Sign up\r\nexport const signUp = createAsyncThunk(\r\n  \"jungleSwap/signUp\",\r\n  async (newUser: User) => {\r\n    try {\r\n      const response = await axios.post(`${apiPath}/auth/signup`, newUser);\r\n      return response.data;\r\n    } catch (err: any) {\r\n      return rejectWithValue(err.response.data.error);\r\n    }\r\n  }\r\n);\r\n\r\n// Sign in\r\nexport const signIn = createAsyncThunk(\r\n  \"jungleSwap/signIn\",\r\n  async (user: User) => {\r\n    try {\r\n      const response = await axios.post(`${apiPath}/auth/signin`, user, {\r\n        withCredentials: true,\r\n      });\r\n      return response.data;\r\n    } catch (err: any) {\r\n      return rejectWithValue(err.response.data.error);\r\n    }\r\n  }\r\n);\r\n\r\n// Log out\r\nexport const logOut = createAsyncThunk(\r\n  \"jungleSwap/logOut\",\r\n  async (user: User) => {\r\n    try {\r\n      await axios.post(`${apiPath}/auth/logout`, user, {\r\n        withCredentials: true,\r\n      });\r\n    } catch (err: any) {\r\n      return rejectWithValue(err.response.data.error);\r\n    }\r\n  }\r\n);\r\n\r\n// Check if user is logged in\r\nexport const checkUserLoggedIn = createAsyncThunk(\r\n  \"jungleSwap/checkUserLoggedIn\",\r\n  async () => {\r\n    try {\r\n      const response = await axios.get(`${apiPath}/auth/checkuser`, {\r\n        withCredentials: true,\r\n      });\r\n      return response.data;\r\n    } catch (err: any) {\r\n      return rejectWithValue(err.response.data.error);\r\n    }\r\n  }\r\n);\r\n\r\n// ---------- Slices ----------\r\nexport const jungleSwapSlice = createSlice({\r\n  name: \"jungleSwap\",\r\n  initialState,\r\n  reducers: {\r\n    // --------- User -----------\r\n    setUser: (state, action: PayloadAction<User>) => {\r\n      state.loggedInUser = action.payload;\r\n    },\r\n\r\n    // --------- Plants ----------\r\n    setPlants: (state, action: PayloadAction<Plant[]>) => {\r\n      state.plants = action.payload;\r\n    },\r\n    setPlant: (state, action: PayloadAction<Plant>) => {\r\n      state.plant = action.payload;\r\n    },\r\n    addPlant: (state, action: PayloadAction<Plant>) => {\r\n      state.plants.push(action.payload);\r\n    },\r\n    setPlantChanges: (state, action: PayloadAction<Plant>) => {\r\n      const {\r\n        _id,\r\n        name,\r\n        description,\r\n        size,\r\n        imageUrl,\r\n        imagePublicId,\r\n        location,\r\n        price,\r\n      } = action.payload;\r\n      state.plants = state.plants.map((singlePlant: Plant) => {\r\n        if (singlePlant._id === _id) {\r\n          singlePlant.name = name;\r\n          singlePlant.description = description;\r\n          singlePlant.size = size;\r\n          singlePlant.imageUrl = imageUrl;\r\n          singlePlant.imagePublicId = imagePublicId;\r\n          singlePlant.location = location;\r\n          singlePlant.price = price;\r\n        }\r\n        return singlePlant;\r\n      });\r\n    },\r\n    removePlant: (state, action: PayloadAction<string | undefined>) => {\r\n      state.plants = state.plants.filter(\r\n        (plant: Plant) => plant._id !== action.payload\r\n      );\r\n    },\r\n    setClientSecret: (state, action: PayloadAction<string>) => {\r\n      state.clientSecret = action.payload;\r\n    },\r\n\r\n    // ---------- Messages ----------\r\n    setMessages: (state, action: PayloadAction<Message[]>) => {\r\n      state.messages = action.payload;\r\n    },\r\n    setMessage: (state, action: PayloadAction<Message>) => {\r\n      state.message = action.payload;\r\n    },\r\n    addMessage: (state, action: PayloadAction<Message>) => {\r\n      state.messages.push(action.payload);\r\n    },\r\n    setMessageChanges: (state, action: PayloadAction<Message>) => {\r\n      const { _id, buyer, seller, plant, request, reply, messageState } =\r\n        action.payload;\r\n      state.messages = state.messages.map((singleMessage) => {\r\n        if (singleMessage._id === _id) {\r\n          singleMessage.buyer = buyer;\r\n          singleMessage.seller = seller;\r\n          singleMessage.plant = plant;\r\n          singleMessage.request = request;\r\n          singleMessage.reply = reply;\r\n          singleMessage.messageState = messageState;\r\n        }\r\n        return singleMessage;\r\n      });\r\n    },\r\n    removeMessage: (state, action: PayloadAction<string | undefined>) => {\r\n      state.messages = state.messages.filter((message: Message) => {\r\n        return message._id !== action.payload;\r\n      });\r\n    },\r\n    setStartAmountOfRequests: (state) => {\r\n      state.loggedInUser &&\r\n        (state.amountOfRequests = (state.loggedInUser as any).amountOfRequests);\r\n    },\r\n    setStartAmountOfReplies: (state) => {\r\n      state.loggedInUser &&\r\n        (state.amountOfReplies = (state.loggedInUser as any).amountOfReplies);\r\n    },\r\n    setAmountOfRequests: (state, action: PayloadAction<number>) => {\r\n      state.amountOfRequests = action.payload;\r\n    },\r\n    setAmountOfReplies: (state, action: PayloadAction<number>) => {\r\n      state.amountOfReplies = action.payload;\r\n    },\r\n    setIsNewRequest: (state, action: PayloadAction<boolean>) => {\r\n      state.isNewRequest = action.payload;\r\n    },\r\n    setIsNewReply: (state, action: PayloadAction<boolean>) => {\r\n      state.isNewReply = action.payload;\r\n    },\r\n    setIntervalId: (state, action: PayloadAction<IntervalId>) => {\r\n      state.intervalId = action.payload;\r\n    },\r\n    setDelayCounter: (state, action: PayloadAction<number>) => {\r\n      state.delayCounter = action.payload;\r\n    },\r\n    increaseDelayCounter: (state) => {\r\n      state.delayCounter += 1;\r\n    },\r\n    decreaseAmountOfRequests: (state) => {\r\n      state.amountOfRequests && (state.amountOfRequests -= 1);\r\n    },\r\n    decreaseAmountOfReplies: (state) => {\r\n      state.amountOfReplies && (state.amountOfReplies -= 1);\r\n    },\r\n\r\n    // ---------- User ----------\r\n    setLoggedInUser: (state, action: PayloadAction<LoggedInUser>) => {\r\n      state.loggedInUser = action.payload;\r\n    },\r\n    setIsUserChange: (state, action: PayloadAction<boolean>) => {\r\n      state.isUserChange = action.payload;\r\n    },\r\n    setError: (state, action: PayloadAction<Error>) => {\r\n      state.error = action.payload;\r\n    },\r\n\r\n    // ---------- Pages handling ----------\r\n    setHeaderContainerHeight: (state, action: PayloadAction<number>) => {\r\n      state.headerContainerHeight = action.payload;\r\n    },\r\n    setAboutContainerHeight: (state, action: PayloadAction<number>) => {\r\n      state.aboutContainerHeight = action.payload;\r\n    },\r\n    scrollToAbout: (state) => {\r\n      scroll.scrollTo(state.headerContainerHeight);\r\n    },\r\n    scrollToPlants: (state) => {\r\n      scroll.scrollTo(state.headerContainerHeight + state.aboutContainerHeight);\r\n    },\r\n  },\r\n\r\n  extraReducers: (builder) => {\r\n    // --------- Plants ----------\r\n    builder.addCase(fetchAllPlants.fulfilled, (state) => {\r\n      state.isFetchingPlants = false;\r\n    });\r\n    builder.addCase(fetchQueryPlants.fulfilled, (state) => {\r\n      state.isFetchingPlants = false;\r\n    });\r\n    builder.addCase(readPlant.fulfilled, (state) => {\r\n      state.isFetchingPlant = false;\r\n    });\r\n    builder.addCase(uploadPlantImage.fulfilled, (state) => {\r\n      state.isUploadingImage = false;\r\n    });\r\n\r\n    // ---------- Messages ----------\r\n    builder.addCase(fetchAllMessages.fulfilled, (state) => {\r\n      state.isFetchingMessages = false;\r\n    });\r\n    builder.addCase(readMessage.fulfilled, (state) => {\r\n      state.isFetchingMessage = false;\r\n    });\r\n  },\r\n});\r\n\r\nexport const {\r\n  // ----------- User -----------\r\n  setUser,\r\n\r\n  // ----------- Plants ----------\r\n  setPlants,\r\n  setPlant,\r\n  addPlant,\r\n  setPlantChanges,\r\n  removePlant,\r\n  setClientSecret,\r\n\r\n  // ---------- Requests ----------\r\n  setMessages,\r\n  setMessage,\r\n  addMessage,\r\n  setMessageChanges,\r\n  removeMessage,\r\n  setStartAmountOfRequests,\r\n  setStartAmountOfReplies,\r\n  setAmountOfRequests,\r\n  setAmountOfReplies,\r\n  setIsNewRequest,\r\n  setIsNewReply,\r\n  setIntervalId,\r\n  setDelayCounter,\r\n  increaseDelayCounter,\r\n  decreaseAmountOfRequests,\r\n  decreaseAmountOfReplies,\r\n\r\n  // ---------- User authentification ----------\r\n  setLoggedInUser,\r\n  setIsUserChange,\r\n  setError,\r\n\r\n  // ---------- Pages handling ----------\r\n  setHeaderContainerHeight,\r\n  setAboutContainerHeight,\r\n  scrollToAbout,\r\n  scrollToPlants,\r\n} = jungleSwapSlice.actions;\r\n\r\nexport default jungleSwapSlice.reducer;\r\n","export default { API_URL: process.env.REACT_APP_SERVER_URL };\r\n","import { useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useAppDispatch, useAppSelector } from \"../hooks\";\r\nimport { animateScroll as scroll } from \"react-scroll\";\r\nimport { Navbar, Nav } from \"react-bootstrap\";\r\nimport {\r\n  fetchAllMessages,\r\n  setIsUserChange,\r\n  setIntervalId,\r\n  increaseDelayCounter,\r\n  setDelayCounter,\r\n  setAmountOfRequests,\r\n  setAmountOfReplies,\r\n  setIsNewRequest,\r\n  setIsNewReply,\r\n  scrollToPlants,\r\n  User,\r\n  Message,\r\n  setMessages,\r\n  setStartAmountOfRequests,\r\n  setStartAmountOfReplies,\r\n} from \"../reducer/jungleSwapSlice\";\r\nimport { RootState } from \"../store\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faBell } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nconst NavBar = (): JSX.Element => {\r\n  const loggedInUser = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.loggedInUser\r\n  );\r\n  const isUserChange = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.isUserChange\r\n  );\r\n  const intervalId = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.intervalId\r\n  );\r\n  const delayCounter = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.delayCounter\r\n  );\r\n  const amountOfRequests = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.amountOfRequests\r\n  );\r\n  const amountOfReplies = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.amountOfReplies\r\n  );\r\n  const isNewRequest = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.isNewRequest\r\n  );\r\n  const isNewReply = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.isNewReply\r\n  );\r\n  const dispatch = useAppDispatch();\r\n\r\n  // Stop interval at cleanup\r\n  useEffect(() => {\r\n    return () => {\r\n      if (intervalId) {\r\n        clearInterval(intervalId);\r\n        dispatch(setIntervalId(null));\r\n        dispatch(setDelayCounter(0));\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // Start request/reply check if user changes\r\n  useEffect(() => {\r\n    if (isUserChange) {\r\n      dispatch(fetchAllMessages())\r\n        .unwrap()\r\n        .then((messages) => {\r\n          dispatch(setMessages(messages));\r\n          isUserChange && dispatch(setStartAmountOfRequests());\r\n          isUserChange && dispatch(setStartAmountOfReplies());\r\n          dispatch(setIsUserChange(false));\r\n          dispatch(\r\n            setIntervalId(\r\n              setInterval(\r\n                () => {\r\n                  dispatch(increaseDelayCounter());\r\n                },\r\n                1000 // every second\r\n              )\r\n            )\r\n          );\r\n          dispatch(increaseDelayCounter());\r\n        })\r\n        .catch((rejectedValue: any) => {\r\n          console.log(rejectedValue.message);\r\n        });\r\n    }\r\n  }, [isUserChange]);\r\n\r\n  // Check new requests/replies for logged in user every second\r\n  useEffect(() => {\r\n    if (loggedInUser) {\r\n      dispatch(fetchAllMessages())\r\n        .unwrap()\r\n        .then((messages) => {\r\n          dispatch(setMessages(messages));\r\n          isUserChange && dispatch(setStartAmountOfRequests());\r\n          isUserChange && dispatch(setStartAmountOfReplies());\r\n          const currentAmountOfRequests = messages.filter(\r\n            (message: Message) => {\r\n              const { seller, messageState } = message;\r\n              return (\r\n                (seller as User)._id === loggedInUser._id &&\r\n                messageState === true\r\n              );\r\n            }\r\n          ).length;\r\n          if (amountOfRequests < currentAmountOfRequests) {\r\n            dispatch(setAmountOfRequests(currentAmountOfRequests));\r\n            dispatch(setIsNewRequest(true));\r\n          } else if (amountOfRequests > currentAmountOfRequests) {\r\n            dispatch(setAmountOfRequests(currentAmountOfRequests));\r\n          }\r\n          const currentAmountOfReplies = messages.filter((message: Message) => {\r\n            const { buyer, reply } = message;\r\n            return (buyer as User)._id === loggedInUser._id && reply;\r\n          }).length;\r\n          if (amountOfReplies < currentAmountOfReplies) {\r\n            dispatch(setAmountOfReplies(currentAmountOfReplies));\r\n            dispatch(setIsNewReply(true));\r\n          }\r\n        })\r\n        .catch((rejectedValue: any) => {\r\n          console.log(rejectedValue.message);\r\n        });\r\n    }\r\n  }, [delayCounter]);\r\n\r\n  return (\r\n    <div>\r\n      <Navbar className=\"pl-5\" variant=\"dark\" expand=\"lg\" fixed=\"top\">\r\n        <Navbar.Brand>\r\n          <Link to=\"/\" onClick={scroll.scrollToTop}>\r\n            JungleSwap\r\n          </Link>\r\n        </Navbar.Brand>\r\n        <Navbar.Toggle aria-controls=\"basic-navbar-nav\">\r\n          {(isNewRequest || isNewReply) && <FontAwesomeIcon icon={faBell} />}\r\n        </Navbar.Toggle>\r\n        <Navbar.Collapse id=\"basic-navbar-nav\">\r\n          <Nav className=\"mr-auto\">\r\n            <>\r\n              <Link\r\n                to=\"/\"\r\n                className=\"p-2\"\r\n                onClick={() => {\r\n                  dispatch(scrollToPlants());\r\n                }}\r\n              >\r\n                All Plants\r\n              </Link>\r\n            </>\r\n            {loggedInUser && (\r\n              <>\r\n                <Link className=\"p-2\" to=\"/plants/create\">\r\n                  Create Plant\r\n                </Link>\r\n                <Link\r\n                  className=\"p-2\"\r\n                  to=\"/requests/fetch\"\r\n                  title={isNewRequest ? \"new request\" : \"\"}\r\n                >\r\n                  {isNewRequest && <FontAwesomeIcon icon={faBell} />}\r\n                  Requests\r\n                </Link>\r\n                <Link\r\n                  className=\"p-2\"\r\n                  to=\"/replies/fetch\"\r\n                  title={isNewReply ? \"new reply\" : \"\"}\r\n                >\r\n                  {isNewReply && <FontAwesomeIcon icon={faBell} />}\r\n                  Replies\r\n                </Link>\r\n              </>\r\n            )}\r\n            {loggedInUser ? (\r\n              <>\r\n                <Link\r\n                  className=\"p-2\"\r\n                  to=\"/auth/logout\"\r\n                  title={loggedInUser.username}\r\n                >\r\n                  Log out\r\n                </Link>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Link className=\"p-2\" to=\"/auth/signin\">\r\n                  Sign in\r\n                </Link>\r\n                <Link className=\"p-2\" to=\"/auth/signup\">\r\n                  Sign up\r\n                </Link>\r\n              </>\r\n            )}\r\n          </Nav>\r\n        </Navbar.Collapse>\r\n      </Navbar>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NavBar;\r\n","import { Link } from \"react-router-dom\";\r\n\r\nconst Footer = (): JSX.Element => {\r\n  return (\r\n    <div className=\"footer-row\">\r\n      <footer>\r\n        © 2021\r\n        <Link to={\"https://www.linkedin.com/in/christian-gerbig/\"}>\r\n          Christian Gerbig\r\n        </Link>\r\n        &amp;\r\n        <Link to={\"https://www.linkedin.com/in/lisa-montebaur/\"}>\r\n          Lisa Montebaur\r\n        </Link>\r\n      </footer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","export default __webpack_public_path__ + \"static/media/JungleSwap_Home.c4ed9b4c.png\";","export default __webpack_public_path__ + \"static/media/JungleSwap_Icon.a6c7c44a.png\";","import image from \"../images/JungleSwap_Home.png\";\r\nimport icon from \"../images/JungleSwap_Icon.png\";\r\n\r\nconst About = (): JSX.Element => {\r\n  return (\r\n    <div className=\"about centered container\">\r\n      <div className=\"row\">\r\n        <div className=\"col-sm-6 col-md-5 col-lg-6\">\r\n          <img className=\"image\" src={image} alt=\"plants\" />\r\n        </div>\r\n        <br />\r\n        <div className=\"about col-sm-6 col-md-5 col-lg-6 px-5 noOverflow\">\r\n          <h4> Welcome to JungleSwap! </h4>\r\n          <h5> Add green to your Home </h5>\r\n          <p>\r\n            It\"s easy-peasy. <br />\r\n            Share your plant offshoots. <br />\r\n            Make money! <br />\r\n            Or swap them for another plant. <br />\r\n            Don\"t have any baby plants? <br />\r\n            You can simply shop and give a plant a new home.\r\n          </p>\r\n          <img className=\"icon\" src={icon} alt=\"icon\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default About;\r\n","import { Link } from \"react-router-dom\";\r\nimport { Plant } from \"../reducer/jungleSwapSlice\";\r\n\r\ntype PlantThumbnailProps = {\r\n  plant: Plant;\r\n};\r\n\r\nconst PlantThumbnail = ({ plant }: PlantThumbnailProps): JSX.Element => {\r\n  const { _id, name, imageUrl, price } = plant;\r\n  return (\r\n    <div className=\"col mb-5\" key={_id}>\r\n      <div className=\"card card-medium-width text-center h-100\">\r\n        <img className=\"card-img-top mediumPicSize\" src={imageUrl} alt={name} />\r\n        <div className=\"card-body mb-5\">\r\n          <h5> {name} </h5>\r\n          <p> {price} € </p>\r\n          <Link\r\n            className=\"btn form-control smallWidth\"\r\n            to={`/plants/read/${_id}`}\r\n          >\r\n            Details\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PlantThumbnail;\r\n","import { useEffect, useState } from \"react\";\r\nimport { useAppDispatch, useAppSelector } from \"../hooks\";\r\nimport {\r\n  fetchAllPlants,\r\n  fetchQueryPlants,\r\n  Plant,\r\n  setPlants,\r\n} from \"../reducer/jungleSwapSlice\";\r\nimport { RootState } from \"../store\";\r\nimport PlantThumbnail from \"../components/PlantThumbnail\";\r\n\r\nconst AllPlants = (): JSX.Element => {\r\n  const [query, setQuery] = useState(\"\");\r\n  const plants = useAppSelector((state: RootState) => state.jungleSwap.plants);\r\n  const dispatch = useAppDispatch();\r\n\r\n  // Handle plant search result if user types in a query\r\n  useEffect(() => {\r\n    if (query) {\r\n      dispatch(fetchQueryPlants(query))\r\n        .unwrap()\r\n        .then((plants: Plant[]) => {\r\n          dispatch(setPlants(plants));\r\n        })\r\n        .catch((rejectedValue: any) => {\r\n          console.log(rejectedValue.message);\r\n        });\r\n    } else {\r\n      dispatch(fetchAllPlants())\r\n        .unwrap()\r\n        .then((plants: Plant[]) => {\r\n          dispatch(setPlants(plants));\r\n        })\r\n        .catch((rejectedValue: any) => {\r\n          console.log(rejectedValue.message);\r\n        });\r\n    }\r\n  }, [query]);\r\n\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      <div className=\"mt-5 mb-3\">\r\n        <h2> Plants </h2>\r\n        <hr />\r\n        <h4> Search a plant </h4>\r\n      </div>\r\n      <div className=\"mb-4\">\r\n        <input\r\n          className=\"smallWidth form-control\"\r\n          type=\"text\"\r\n          placeholder=\"Search...\"\r\n          value={query}\r\n          onChange={(event) => {\r\n            setQuery(event.target.value);\r\n          }}\r\n        />\r\n      </div>\r\n      <div className=\"row row-cols-1 row-cols-md-3 g-4\">\r\n        {plants &&\r\n          plants.map((plant: Plant, index: number): JSX.Element => {\r\n            return <PlantThumbnail plant={plant} key={index} />;\r\n          })}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AllPlants;\r\n","import { Link } from \"react-router-dom\";\r\nimport { useAppDispatch } from \"../hooks\";\r\nimport { scrollToAbout } from \"../reducer/jungleSwapSlice\";\r\n\r\nconst Title = (): JSX.Element => {\r\n  const dispatch = useAppDispatch();\r\n\r\n  return (\r\n    <div className=\"row my-5\">\r\n      <div className=\"col-6 offset-3 my-5 borderAround\">\r\n        <h2 className=\"title mb-2\"> JungleSwap </h2>\r\n        <h5 className=\"mt-3 mb-5\"> Share your green heart </h5>\r\n        <div className=\"mb-5\">\r\n          <Link\r\n            to={\"/\"}\r\n            className=\"biggerFontSize\"\r\n            onClick={() => {\r\n              dispatch(scrollToAbout());\r\n            }}\r\n          >\r\n            Try it!\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Title;\r\n","type LoadingSpinnerProps = {\r\n  spinnerText: string;\r\n};\r\n\r\nconst LoadingSpinner = ({ spinnerText }: LoadingSpinnerProps): JSX.Element => {\r\n  return (\r\n    <div\r\n      className=\"spinner-grow text-success mt-5 loadingSpinner\"\r\n      role=\"status\"\r\n    >\r\n      <span className=\"visually-hidden\">\r\n        <br /> <br /> {spinnerText}\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoadingSpinner;\r\n","import { useEffect, useRef } from \"react\";\r\nimport { useAppDispatch, useAppSelector } from \"../hooks\";\r\nimport {\r\n  fetchAllPlants,\r\n  setHeaderContainerHeight,\r\n  setAboutContainerHeight,\r\n  setPlants,\r\n  Plant,\r\n} from \"../reducer/jungleSwapSlice\";\r\nimport { RootState } from \"../store\";\r\n\r\nimport About from \"../components/About\";\r\nimport AllPlants from \"../components/AllPlants\";\r\nimport Title from \"../components/Title\";\r\nimport LoadingSpinner from \"../components/LoadingSpinner\";\r\n\r\nconst Home = (): JSX.Element => {\r\n  const isFetchingPlants = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.isFetchingPlants\r\n  );\r\n  const dispatch = useAppDispatch();\r\n  const elementRef = useRef([]);\r\n\r\n  // Load plants and user data as soon as page loads\r\n  useEffect(() => {\r\n    dispatch(fetchAllPlants())\r\n      .unwrap()\r\n      .then((plants: Plant[]) => {\r\n        dispatch(setPlants(plants));\r\n      })\r\n      .catch((rejectedValue: any) => {\r\n        console.log(rejectedValue.message);\r\n      });\r\n    const headerElementHeight = Math.round(\r\n      (elementRef.current[0] as any).getBoundingClientRect().height\r\n    );\r\n    dispatch(setHeaderContainerHeight(headerElementHeight));\r\n    const aboutElementHeight = Math.round(\r\n      (elementRef.current[1] as any).getBoundingClientRect().height\r\n    );\r\n    dispatch(setAboutContainerHeight(aboutElementHeight));\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <header\r\n        className=\"text-center pt-5 pb-5 headerImg\"\r\n        ref={(headerElement) => {\r\n          (elementRef.current[0] as any) = headerElement;\r\n        }}\r\n      >\r\n        {isFetchingPlants && (\r\n          <LoadingSpinner spinnerText={\"Loading plants...\"} />\r\n        )}\r\n        <Title />\r\n      </header>\r\n\r\n      <section\r\n        ref={(aboutElement) => {\r\n          (elementRef.current[1] as any) = aboutElement;\r\n        }}\r\n      >\r\n        <About />\r\n      </section>\r\n\r\n      <section>\r\n        <AllPlants />\r\n      </section>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import { useEffect } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { animateScroll as scroll } from \"react-scroll\";\r\nimport { useAppDispatch, useAppSelector } from \"../hooks\";\r\nimport {\r\n  setError,\r\n  setIsNewRequest,\r\n  setIsUserChange,\r\n  setLoggedInUser,\r\n  signUp,\r\n} from \"../reducer/jungleSwapSlice\";\r\nimport { RootState } from \"../store\";\r\n\r\nconst SignUp = (): JSX.Element => {\r\n  const error = useAppSelector((state: RootState) => state.jungleSwap.error);\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  // Clear variables and scroll to top as soon as page loads\r\n  useEffect(() => {\r\n    dispatch(setError(null));\r\n    dispatch(setIsNewRequest(false));\r\n    scroll.scrollToTop();\r\n  }, []);\r\n\r\n  // Sign up\r\n  const handleSignUp = (event: any): void => {\r\n    event.preventDefault();\r\n    const { username, email, password } = event.target;\r\n    const newUser = {\r\n      username: username.value,\r\n      email: email.value.toLowerCase(),\r\n      password: password.value,\r\n    };\r\n    dispatch(signUp(newUser))\r\n      .unwrap()\r\n      .then((user) => {\r\n        dispatch(setLoggedInUser(user));\r\n        dispatch(setIsUserChange(true));\r\n        history.push(\"/\");\r\n      })\r\n      .catch((rejectedValue: any) => {\r\n        dispatch(setError(rejectedValue.message));\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"container row mt-5\">\r\n      <div className=\"mt-5 col-11 col-md-5 offset-1 offset-md-5\">\r\n        <h2 className=\"mb-5\"> Sign Up </h2>\r\n        <form\r\n          onSubmit={(event) => {\r\n            handleSignUp(event);\r\n          }}\r\n        >\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"InputUsername\"> Username </label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              id=\"InputUsername\"\r\n              name=\"username\"\r\n              placeholder=\"Enter\"\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"InputEmail\"> Email address </label>\r\n            <input\r\n              type=\"email\"\r\n              className=\"form-control\"\r\n              id=\"InputEmail\"\r\n              name=\"email\"\r\n              placeholder=\"Enter\"\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"InputPassword\"> Password </label>\r\n            <input\r\n              name=\"password\"\r\n              type=\"password\"\r\n              className=\"form-control\"\r\n              id=\"InputPassword\"\r\n              placeholder=\"Enter\"\r\n            />\r\n          </div>\r\n          {error && <p className=\"warningColor\"> {error} </p>}\r\n          <button\r\n            type=\"submit\"\r\n            className=\"btn btn-sm mt-4 smallWidth form-control\"\r\n            formNoValidate\r\n          >\r\n            Sign up\r\n          </button>\r\n          <p className=\"padding\"> Already have an account? </p>\r\n          <div className=\"text-right\">\r\n            <Link to={\"/auth/signin\"}>\r\n              <button className=\"btn btn-sm ml-4 smallWidth form-control mt-0 mb-2\">\r\n                Sign In\r\n              </button>\r\n            </Link>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignUp;\r\n","import { useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { animateScroll as scroll } from \"react-scroll\";\r\nimport { useAppDispatch, useAppSelector } from \"../hooks\";\r\nimport {\r\n  setAmountOfReplies,\r\n  setAmountOfRequests,\r\n  setError,\r\n  setIsNewRequest,\r\n  setIsUserChange,\r\n  setLoggedInUser,\r\n  signIn,\r\n  User,\r\n} from \"../reducer/jungleSwapSlice\";\r\nimport { RootState } from \"../store\";\r\n\r\nconst SignIn = (): JSX.Element => {\r\n  const error = useAppSelector((state: RootState) => state.jungleSwap.error);\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  // Clear variables and scroll to top as soon as page loads\r\n  useEffect(() => {\r\n    dispatch(setError(null));\r\n    dispatch(setIsNewRequest(false));\r\n    scroll.scrollToTop();\r\n  }, []);\r\n\r\n  // Sign in\r\n  const handleSignIn = (event: any, history: any): void => {\r\n    event.preventDefault();\r\n    const { email, password } = event.target;\r\n    const user: User = {\r\n      email: email.value,\r\n      password: password.value,\r\n    };\r\n    dispatch(signIn(user))\r\n      .unwrap()\r\n      .then((user) => {\r\n        dispatch(setLoggedInUser(user));\r\n        const { amountOfRequests, amountOfReplies } = user;\r\n        dispatch(setAmountOfRequests(amountOfRequests));\r\n        dispatch(setAmountOfReplies(amountOfReplies));\r\n        dispatch(setIsUserChange(true));\r\n        history.push(\"/\");\r\n      })\r\n      .catch((rejectedValue: any) => {\r\n        dispatch(setError(rejectedValue.message));\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"container row mt-5 custom fullscreen\">\r\n      <div className=\"mt-5 col-11 col-md-5 offset-1 offset-md-5\">\r\n        <h2 className=\"mb-5\"> Sign In </h2>\r\n        <form\r\n          onSubmit={(event) => {\r\n            handleSignIn(event, history);\r\n          }}\r\n        >\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"InputEmail\"> Email address </label>\r\n            <input\r\n              type=\"email\"\r\n              className=\"form-control\"\r\n              id=\"InputEmail\"\r\n              name=\"email\"\r\n              placeholder=\"Enter\"\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"InputPassword\"> Password </label>\r\n            <input\r\n              name=\"password\"\r\n              type=\"password\"\r\n              className=\"form-control\"\r\n              id=\"InputPassword\"\r\n              placeholder=\"Enter\"\r\n            />\r\n          </div>\r\n          {error && <p className=\"warningColor\"> {error} </p>}\r\n          <button\r\n            type=\"submit\"\r\n            className=\"btn btn-sm mt-4 smallWidth form-control\"\r\n            formNoValidate\r\n          >\r\n            Sign in\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignIn;\r\n","import { useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { animateScroll as scroll } from \"react-scroll\";\r\nimport { useAppDispatch, useAppSelector } from \"../hooks\";\r\nimport {\r\n  IntervalId,\r\n  logOut,\r\n  setDelayCounter,\r\n  setIntervalId,\r\n  setIsNewRequest,\r\n  setLoggedInUser,\r\n  setUser,\r\n  User,\r\n} from \"../reducer/jungleSwapSlice\";\r\nimport { RootState } from \"../store\";\r\n\r\nconst LogOut = (): JSX.Element => {\r\n  const loggedInUser = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.loggedInUser\r\n  );\r\n  const intervalId = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.intervalId\r\n  );\r\n  const amountOfRequests = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.amountOfRequests\r\n  );\r\n  const amountOfReplies = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.amountOfReplies\r\n  );\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  // Update user and log out as soon as page loads\r\n  useEffect(() => {\r\n    const clonedUser: User = JSON.parse(JSON.stringify(loggedInUser));\r\n    clonedUser.amountOfRequests = amountOfRequests;\r\n    clonedUser.amountOfReplies = amountOfReplies;\r\n    dispatch(setUser(clonedUser));\r\n    dispatch(logOut(clonedUser))\r\n      .unwrap()\r\n      .then(() => {\r\n        dispatch(setLoggedInUser(null));\r\n        if (intervalId) {\r\n          clearInterval(intervalId);\r\n          dispatch(setIntervalId(null));\r\n          dispatch(setDelayCounter(0));\r\n        }\r\n        dispatch(setIsNewRequest(false));\r\n        history.push(\"/\");\r\n        scroll.scrollToTop();\r\n      });\r\n  }, []);\r\n\r\n  return <div />;\r\n};\r\n\r\nexport default LogOut;\r\n","import { useEffect } from \"react\";\r\nimport { Link, Redirect, useHistory } from \"react-router-dom\";\r\nimport { animateScroll as scroll } from \"react-scroll\";\r\nimport { useAppDispatch, useAppSelector } from \"../hooks\";\r\nimport {\r\n  addPlant,\r\n  createPlant,\r\n  Plant,\r\n  checkUserLoggedIn,\r\n  setError,\r\n  setLoggedInUser,\r\n  uploadPlantImage,\r\n} from \"../reducer/jungleSwapSlice\";\r\nimport { RootState } from \"../store\";\r\n\r\nconst CreatePlantForm = (): JSX.Element => {\r\n  const loggedInUser = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.loggedInUser\r\n  );\r\n  const error = useAppSelector((state: RootState) => state.jungleSwap.error);\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  // Scroll to top as soon as page loads and scroll to plants section during cleanup\r\n  useEffect(() => {\r\n    dispatch(setError(null));\r\n    scroll.scrollToTop();\r\n    dispatch(checkUserLoggedIn())\r\n      .unwrap()\r\n      .then((user) => {\r\n        dispatch(setLoggedInUser(user));\r\n      })\r\n      .catch((rejectedValue: any) => {\r\n        console.log(rejectedValue.message);\r\n      });\r\n  }, []);\r\n\r\n  if (!loggedInUser) {\r\n    return <Redirect to={\"/auth/unauthorized\"} />;\r\n  }\r\n\r\n  // Create plant\r\n  const handleCreatePlant = (event: any) => {\r\n    event.preventDefault();\r\n    const { name, description, size, plantImage, location, price } =\r\n      event.target;\r\n    const image = plantImage.files[0];\r\n    const uploadForm = new FormData();\r\n    uploadForm.append(\"image\", image);\r\n    dispatch(uploadPlantImage(uploadForm))\r\n      .unwrap()\r\n      .then(({ imageUrl, imagePublicId }: any) => {\r\n        const newPlant: Plant = {\r\n          name: name.value,\r\n          description: description.value,\r\n          size: size.value,\r\n          imageUrl,\r\n          imagePublicId,\r\n          location: location.value,\r\n          price: price.value,\r\n        };\r\n        dispatch(createPlant(newPlant))\r\n          .unwrap()\r\n          .then((plant: Plant) => {\r\n            dispatch(addPlant(plant));\r\n            history.push(\"/\");\r\n            scroll.scrollToBottom();\r\n          })\r\n          .catch((rejectedValue: any) => {\r\n            console.log(rejectedValue.message);\r\n          });\r\n      })\r\n      .catch((rejectedValue: any) => {\r\n        console.log(rejectedValue.message);\r\n      });\r\n  };\r\n\r\n  if (!loggedInUser) {\r\n    return <Redirect to={\"/auth/signup\"} />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"container row mt-5 fullscreen\">\r\n      <div className=\"mt-5 col-12 col-md-6 offset-md-6\">\r\n        <h2 className=\"mb-5 text-left\"> Create a plant </h2>\r\n        <form\r\n          onSubmit={(event) => {\r\n            handleCreatePlant(event);\r\n          }}\r\n        >\r\n          <label htmlFor=\"enterName\"> Name </label>\r\n          <input\r\n            className=\"mb-4 form-control\"\r\n            name=\"name\"\r\n            type=\"text\"\r\n            placeholder=\"Enter\"\r\n            id=\"enterName\"\r\n          />\r\n          <label htmlFor=\"enterDescription\"> Description </label>\r\n          <input\r\n            className=\"mb-4 form-control\"\r\n            name=\"description\"\r\n            type=\"text\"\r\n            placeholder=\"Enter\"\r\n            id=\"enterDescription\"\r\n          />\r\n          <label htmlFor=\"enterSize\"> Size (cm) </label>\r\n          <input\r\n            className=\"mb-4 form-control\"\r\n            name=\"size\"\r\n            type=\"number\"\r\n            min=\"1\"\r\n            placeholder=\"Enter\"\r\n            id=\"enterSize\"\r\n          />\r\n          <label htmlFor=\"enterLocation\"> Location </label>\r\n          <select\r\n            className=\"mb-4 form-control p-2\"\r\n            name=\"location\"\r\n            id=\"enterLocation\"\r\n          >\r\n            <option> Select location </option>\r\n            <option value=\"sun\"> sun </option>\r\n            <option value=\"shade\"> shade </option>\r\n            <option value=\"sun and shade\"> sun and shade </option>\r\n          </select>\r\n          <label htmlFor=\"enterPrice\"> Price (EUR) </label>\r\n          <input\r\n            className=\"mb-4 form-control\"\r\n            name=\"price\"\r\n            type=\"number\"\r\n            min=\"1\"\r\n            placeholder=\"Enter\"\r\n            id=\"enterPrice\"\r\n          />\r\n          <label htmlFor=\"enterImage\"> Image </label>\r\n          <input\r\n            className=\"mb-4 form-control\"\r\n            name=\"plantImage\"\r\n            type=\"file\"\r\n            id=\"enterImage\"\r\n          />\r\n          {error && <p className=\"warningColor\"> {error} </p>}\r\n          <div className=\"col-12 text-right pr-0\">\r\n            <button\r\n              className=\"btn btn-sm form-control smallWidth ml-4 mb-2\"\r\n              type=\"submit\"\r\n            >\r\n              Create\r\n            </button>\r\n            <Link to={\"/\"}>\r\n              <button className=\"btn btn-sm form-control smallWidth ml-4 mb-2\">\r\n                Go back\r\n              </button>\r\n            </Link>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreatePlantForm;\r\n","import { useEffect } from \"react\";\r\nimport { Link, Redirect, useParams, useHistory } from \"react-router-dom\";\r\nimport { animateScroll as scroll } from \"react-scroll\";\r\nimport LoadingSpinner from \"../components/LoadingSpinner\";\r\nimport { useAppDispatch, useAppSelector } from \"../hooks\";\r\nimport {\r\n  readPlant,\r\n  deletePlant,\r\n  deleteMessage,\r\n  scrollToPlants,\r\n  User,\r\n  Message,\r\n  Plant,\r\n  setPlant,\r\n  deletePlantImage,\r\n  removePlant,\r\n  PlantId,\r\n  ImagePublicId,\r\n  DestroyImageData,\r\n  removeMessage,\r\n  decreaseAmountOfReplies,\r\n  checkUserLoggedIn,\r\n  setLoggedInUser,\r\n} from \"../reducer/jungleSwapSlice\";\r\nimport { RootState } from \"../store\";\r\n\r\nconst PlantDetails = (): JSX.Element => {\r\n  const loggedInUser = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.loggedInUser\r\n  );\r\n  const isFetchingPlant = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.isFetchingPlant\r\n  );\r\n  const messages = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.messages\r\n  );\r\n  const plant = useAppSelector((state: RootState) => state.jungleSwap.plant);\r\n  const { plantId } = useParams<{ plantId: PlantId }>();\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  // Read plant data and scroll to top as soon as page loads\r\n  useEffect(() => {\r\n    dispatch(checkUserLoggedIn())\r\n      .unwrap()\r\n      .then((user) => {\r\n        dispatch(setLoggedInUser(user));\r\n        dispatch(readPlant(plantId))\r\n          .unwrap()\r\n          .then((plant: Plant) => {\r\n            dispatch(setPlant(plant));\r\n            scroll.scrollToTop();\r\n          })\r\n          .catch((rejectedValue: any) => {\r\n            console.log(rejectedValue.message);\r\n          });\r\n      })\r\n      .catch((rejectedValue: any) => {\r\n        console.log(rejectedValue.message);\r\n      });\r\n  }, []);\r\n\r\n  // Delete plant\r\n  const handleDeletePlant = (\r\n    imagePublicId: ImagePublicId,\r\n    plantId: PlantId,\r\n    messages: Message[]\r\n  ) => {\r\n    messages.forEach((message: Message) => {\r\n      const { _id, plant }: any = message;\r\n      if (plant._id === plantId) {\r\n        dispatch(deleteMessage(_id))\r\n          .unwrap()\r\n          .then(() => {\r\n            dispatch(removeMessage(_id));\r\n            dispatch(decreaseAmountOfReplies());\r\n          })\r\n          .catch((rejectedValue: any) => {\r\n            console.log(rejectedValue.message);\r\n          });\r\n      }\r\n    });\r\n    const destroyImageData: DestroyImageData = {\r\n      imagePublicId,\r\n    };\r\n    dispatch(deletePlantImage(destroyImageData))\r\n      .unwrap()\r\n      .then(() => {\r\n        dispatch(deletePlant(plantId))\r\n          .unwrap()\r\n          .then(() => {\r\n            dispatch(removePlant(plantId));\r\n            history.push(\"/\");\r\n            dispatch(scrollToPlants());\r\n          })\r\n          .catch((rejectedValue: any) => {\r\n            console.log(rejectedValue.message);\r\n          });\r\n      })\r\n      .catch((rejectedValue: any) => {\r\n        console.log(rejectedValue.message);\r\n      });\r\n  };\r\n\r\n  if (!loggedInUser) {\r\n    return <Redirect to={\"/auth/signup\"} />;\r\n  }\r\n\r\n  const {\r\n    _id,\r\n    name,\r\n    description,\r\n    size,\r\n    imageUrl,\r\n    imagePublicId,\r\n    location,\r\n    price,\r\n    creator,\r\n  } = plant as Plant;\r\n\r\n  if (isFetchingPlant || !creator) {\r\n    return (\r\n      <div className=\"container mt-5\">\r\n        <LoadingSpinner spinnerText={\"Loading plant details...\"} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mt-5 row row-md-10 offset-md-4\">\r\n      <div className=\"mt-4 mb-3 pt-4 container\">\r\n        <h2> Plant details </h2>\r\n      </div>\r\n      <div className=\"col\">\r\n        <div className=\"card cardMediumWidth\">\r\n          {imageUrl && (\r\n            <img\r\n              className=\"card-img-top mediumPicSize\"\r\n              src={imageUrl}\r\n              alt={name}\r\n            />\r\n          )}\r\n          <div className=\"ml-2 mt-2\">\r\n            <span> Name: </span> {name}\r\n          </div>\r\n          <div className=\"ml-2 mt-2\">\r\n            <span> Description: </span> {description}\r\n          </div>\r\n          <div className=\"ml-2 mt-2\">\r\n            <span> Size: </span> {size} cm\r\n          </div>\r\n          <div className=\"ml-2 mt-2\">\r\n            <span> Likes: </span> {location}\r\n          </div>\r\n          <div className=\"ml-2 mt-2\">\r\n            <span> Price: </span> {price} €\r\n          </div>\r\n          <div className=\"ml-2 mt-2 col justify-content-center\">\r\n            <div className=\"row-2 justify-content-center\">\r\n              <div className=\"card-body text-right pt-0\">\r\n                {loggedInUser._id === (creator as User)._id ? (\r\n                  <div className=\"p-0\">\r\n                    <Link to={\"/plants/update\"}>\r\n                      <button className=\"btn btn-sm ml-2 form-control smallWidth mb-2\">\r\n                        Update\r\n                      </button>\r\n                    </Link>\r\n                    <button\r\n                      className=\"btn btn-sm ml-2 form-control smallWidth mb-2\"\r\n                      onClick={() => {\r\n                        handleDeletePlant(imagePublicId, _id, messages);\r\n                      }}\r\n                    >\r\n                      Delete\r\n                    </button>\r\n                  </div>\r\n                ) : (\r\n                  <div>\r\n                    <Link to=\"/plants/checkout\">\r\n                      <button className=\"btn btn-sm ml-2 form-control smallWidth mb-2\">\r\n                        Buy\r\n                      </button>\r\n                    </Link>\r\n                    <Link to=\"/messages/create\">\r\n                      <button className=\"btn btn-sm ml-2 form-control smallWidth mb-2\">\r\n                        Swap\r\n                      </button>\r\n                    </Link>\r\n                  </div>\r\n                )}\r\n                <Link\r\n                  to={\"/\"}\r\n                  onClick={() => {\r\n                    dispatch(scrollToPlants());\r\n                  }}\r\n                >\r\n                  <button className=\"btn btn-sm ml-2 form-control smallWidth mb-3\">\r\n                    Go back\r\n                  </button>\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PlantDetails;\r\n","import { useEffect } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { animateScroll as scroll } from \"react-scroll\";\r\nimport LoadingSpinner from \"../components/LoadingSpinner\";\r\nimport { useAppDispatch, useAppSelector } from \"../hooks\";\r\nimport {\r\n  updatePlant,\r\n  setPlant,\r\n  Plant,\r\n  deletePlantImage,\r\n  uploadPlantImage,\r\n  setPlantChanges,\r\n  scrollToPlants,\r\n  checkUserLoggedIn,\r\n  setLoggedInUser,\r\n} from \"../reducer/jungleSwapSlice\";\r\nimport { RootState } from \"../store\";\r\n\r\nconst UpdatePlantForm = (): JSX.Element => {\r\n  const loggedInUser = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.loggedInUser\r\n  );\r\n  const isUploadingImage = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.isUploadingImage\r\n  );\r\n  const plant = useAppSelector((state: RootState) => state.jungleSwap.plant);\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  // Scroll to top as soon as page loads\r\n  useEffect(() => {\r\n    scroll.scrollToTop();\r\n    dispatch(checkUserLoggedIn())\r\n      .unwrap()\r\n      .then((user) => {\r\n        dispatch(setLoggedInUser(user));\r\n      })\r\n      .catch((rejectedValue: any) => {\r\n        console.log(rejectedValue.message);\r\n      });\r\n  }, []);\r\n\r\n  // Check which plant values changed\r\n  const handlePlantEntryChange = (\r\n    { target }: any,\r\n    plant: Plant,\r\n    itemNumber: number\r\n  ): void => {\r\n    const clonedPlant: Plant = JSON.parse(JSON.stringify(plant));\r\n    // eslint-disable-next-line default-case\r\n    switch (itemNumber) {\r\n      case 0:\r\n        clonedPlant.name = target.value;\r\n        break;\r\n      case 1:\r\n        clonedPlant.description = target.value;\r\n        break;\r\n      case 2:\r\n        clonedPlant.size = target.value;\r\n        break;\r\n      case 3:\r\n        clonedPlant.location = target.value;\r\n        break;\r\n      case 4:\r\n        clonedPlant.price = target.value;\r\n    }\r\n    dispatch(setPlant(clonedPlant));\r\n  };\r\n\r\n  // Plant image changed\r\n  const handleImageChange = ({ target }: any, plant: Plant): void => {\r\n    const image = target.files[0];\r\n    const { imagePublicId } = plant as Plant;\r\n    const destroyImageData = {\r\n      imagePublicId,\r\n    };\r\n    dispatch(deletePlantImage(destroyImageData))\r\n      .unwrap()\r\n      .then(() => {\r\n        const uploadForm = new FormData();\r\n        uploadForm.append(\"image\", image);\r\n        dispatch(uploadPlantImage(uploadForm))\r\n          .unwrap()\r\n          .then(({ imageUrl, imagePublicId }: any) => {\r\n            const clonedPlant = JSON.parse(JSON.stringify(plant));\r\n            clonedPlant.imagePublicId = imagePublicId;\r\n            clonedPlant.imageUrl = imageUrl;\r\n            dispatch(setPlant(clonedPlant));\r\n          })\r\n          .catch((rejectedValue: any) => {\r\n            console.log(rejectedValue.message);\r\n          });\r\n      });\r\n  };\r\n\r\n  const handleUpdatePlant = ({\r\n    _id,\r\n    name,\r\n    description,\r\n    size,\r\n    imageUrl,\r\n    imagePublicId,\r\n    location,\r\n    price,\r\n  }: Plant): void => {\r\n    const updatedPlant: Plant = {\r\n      name,\r\n      description,\r\n      size,\r\n      imageUrl,\r\n      imagePublicId,\r\n      location,\r\n      price,\r\n    };\r\n    dispatch(updatePlant({ plantId: _id, updatedPlant }))\r\n      .unwrap()\r\n      .then((updatedPlant) => {\r\n        dispatch(setPlantChanges(updatedPlant));\r\n        history.push(\"/\");\r\n        dispatch(scrollToPlants());\r\n      })\r\n      .catch((rejectedValue: any) => {\r\n        console.log(rejectedValue.message);\r\n      });\r\n  };\r\n\r\n  if (!loggedInUser) {\r\n    return <Redirect to={\"/auth/unauthorized\"} />;\r\n  }\r\n\r\n  const { _id, name, description, size, imageUrl, price } = plant as Plant;\r\n  return (\r\n    <div className=\"container row mt-5 \">\r\n      <div className=\"mt-2 col-12 col-md-6 offset-md-6\">\r\n        <h2 className=\"mt-5 mb-4 text-left\"> Update your plant </h2>\r\n        <div className=\"card cardMediumWidth mb-5\">\r\n          {isUploadingImage ? <LoadingSpinner spinnerText={\"Uploading image\"}/> : <img className=\"mb-2 smallPicSize\" src={imageUrl} alt={name} />}\r\n          <div className=\"card-body\">\r\n            <label htmlFor=\"updateName\"> Name </label>\r\n            <input\r\n              className=\"mb-4 form-control\"\r\n              type=\"text\"\r\n              onChange={(event) => {\r\n                handlePlantEntryChange(event, plant, 0);\r\n              }}\r\n              value={name}\r\n              id=\"updateName\"\r\n            />\r\n            <label htmlFor=\"updateDescription\"> Description </label>\r\n            <input\r\n              className=\"mb-4 form-control\"\r\n              type=\"text\"\r\n              onChange={(event) => {\r\n                handlePlantEntryChange(event, plant, 1);\r\n              }}\r\n              value={description}\r\n              id=\"updateDescription\"\r\n            />\r\n            <label htmlFor=\"updateSize\"> Size (cm) </label>\r\n            <input\r\n              className=\"mb-4 form-control\"\r\n              type=\"number\"\r\n              onChange={(event) => {\r\n                handlePlantEntryChange(event, plant, 2);\r\n              }}\r\n              value={size}\r\n              id=\"updateSize\"\r\n            />\r\n            <label htmlFor=\"updateLocation\"> Location </label>\r\n            <select\r\n              className=\"mb-4 form-control px-2\"\r\n              onChange={(event) => {\r\n                handlePlantEntryChange(event, plant, 3);\r\n              }}\r\n              name=\"location\"\r\n              placeholder=\"Select\"\r\n              id=\"updateLocation\"\r\n            >\r\n              <option value=\"sun\"> sun </option>\r\n              <option value=\"shade\"> shade </option>\r\n              <option value=\"sun and shade\"> sun and shade </option>\r\n            </select>\r\n            <label htmlFor=\"updatePrice\"> Price (EUR) </label>\r\n            <input\r\n              className=\"mb-4 form-control\"\r\n              name=\"price\"\r\n              type=\"number\"\r\n              min=\"1\"\r\n              onChange={(event) => {\r\n                handlePlantEntryChange(event, plant, 4);\r\n              }}\r\n              value={price}\r\n              id=\"updatePrice\"\r\n            />\r\n            <label htmlFor=\"updateImage\"> Image </label>\r\n            <input\r\n              className=\"mb-4 form-control\"\r\n              onChange={(event) => {\r\n                handleImageChange(event, plant);\r\n              }}\r\n              type=\"file\"\r\n              id=\"updateImage\"\r\n            />\r\n            <div className=\"col-12 text-right pr-0\">\r\n              <button\r\n                className=\"btn btn-sm ml-4 form-control smallWidth mb-2\"\r\n                onClick={() => {\r\n                  handleUpdatePlant(plant);\r\n                }}\r\n              >\r\n                Save\r\n              </button>\r\n              <Link to={`/plants/read/${_id}`}>\r\n                <button className=\"btn btn-sm ml-4 smallWidth form-control mb-2\">\r\n                  Go back\r\n                </button>\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UpdatePlantForm;\r\n","import { useState, useEffect } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { useAppDispatch, useAppSelector } from \"../hooks\";\r\nimport { CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\r\nimport {\r\n  createPayment,\r\n  scrollToPlants,\r\n  Plant,\r\n  setClientSecret,\r\n} from \"../reducer/jungleSwapSlice\";\r\nimport { RootState } from \"../store\";\r\n\r\ninterface CardStyle {\r\n  style: {\r\n    base: {\r\n      color: string;\r\n      fontFamily: string;\r\n      fontSmoothing: string;\r\n      fontSize: string;\r\n      \"::placeholder\": { color: string };\r\n    };\r\n    invalid: {\r\n      color: string;\r\n      iconColor: string;\r\n    };\r\n  };\r\n}\r\n\r\nconst CheckoutForm = (): JSX.Element => {\r\n  const [isSucceeded, setIsSucceeded] = useState(false);\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [isDisabled, setIsDisabled] = useState(true);\r\n  const [paymentError, setPaymentError] = useState(\"\");\r\n  const stripe = useStripe();\r\n  const elements = useElements();\r\n  const clientSecret = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.clientSecret\r\n  );\r\n  const plant = useAppSelector((state: RootState) => state.jungleSwap.plant);\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  // Create payment as soon as page loads\r\n  useEffect(() => {\r\n    dispatch(createPayment(plant))\r\n      .unwrap()\r\n      .then((payment: any) => {\r\n        dispatch(setClientSecret(payment.clientSecret));\r\n      })\r\n      .catch((rejectedValue: any) => {\r\n        console.log(rejectedValue.message);\r\n      });\r\n    return () => {\r\n      history.push(\"/\");\r\n      dispatch(scrollToPlants());\r\n    };\r\n  }, []);\r\n\r\n  // Card styling\r\n  const cardStyle: CardStyle = {\r\n    style: {\r\n      base: {\r\n        color: \"#32325d\",\r\n        fontFamily: \"Arial, sans-serif\",\r\n        fontSmoothing: \"antialiased\",\r\n        fontSize: \"16px\",\r\n        \"::placeholder\": { color: \"#32325d\" },\r\n      },\r\n      invalid: {\r\n        color: \"#fa755a\",\r\n        iconColor: \"#fa755a\",\r\n      },\r\n    },\r\n  };\r\n\r\n  // Listen for changes in Card element and display any errors as customer types card details\r\n  const handleChange = async (event: any): Promise<void> => {\r\n    setIsDisabled(event.empty);\r\n    setPaymentError(event.error ? event.error.message : \"\");\r\n  };\r\n\r\n  // Submit payment\r\n  const handleSubmitPayment = async (event: { preventDefault: () => void }) => {\r\n    event.preventDefault();\r\n    if (!stripe || !elements) {\r\n      // Stripe.js has not yet loaded.\r\n      return;\r\n    }\r\n    setIsProcessing(true);\r\n    const payload = await (stripe as any).confirmCardPayment(clientSecret, {\r\n      payment_method: { card: (elements as any).getElement(CardElement) },\r\n    });\r\n    if (payload.error) {\r\n      setPaymentError(`Payment failed ${payload.error.message}`);\r\n      setIsProcessing(false);\r\n    } else {\r\n      setPaymentError(\"\");\r\n      setIsProcessing(false);\r\n      setIsSucceeded(true);\r\n    }\r\n  };\r\n\r\n  const { _id, name, price } = plant as Plant;\r\n  return (\r\n    <div className=\"container col-9\">\r\n      <form\r\n        className=\"checkoutForm mt-5\"\r\n        id=\"payment-form\"\r\n        onSubmit={handleSubmitPayment}\r\n      >\r\n        <h2 className=\"text-left mb-2 p-2\"> {name} </h2>\r\n        <h3 className=\"text-left mb-4 p-2\"> Price: {price} € </h3>\r\n        <CardElement\r\n          className=\"p-2\"\r\n          id=\"card-element\"\r\n          options={cardStyle}\r\n          onChange={handleChange}\r\n        />\r\n        <div className=\"row justify-content-center\">\r\n          <button\r\n            className=\"btn btn-sm mt-5 mb-4\"\r\n            type=\"submit\"\r\n            disabled={isProcessing || isDisabled || isSucceeded}\r\n            id=\"submit\"\r\n          >\r\n            <span id=\"button-text\">\r\n              {isProcessing ? (\r\n                <div className=\"spinner\" id=\"spinner\" />\r\n              ) : (\r\n                \"Pay now\"\r\n              )}\r\n            </span>\r\n          </button>\r\n        </div>\r\n        {\r\n          /* Show any error that happens when processing the payment */\r\n          paymentError && (\r\n            <div className=\"card-error\" role=\"alert\">\r\n              {paymentError}\r\n            </div>\r\n          )\r\n          /* Show success message upon completion */\r\n        }\r\n        <p\r\n          className={\r\n            isSucceeded\r\n              ? \"result-message text-center\"\r\n              : \"result-message hidden text-center\"\r\n          }\r\n        >\r\n          Payment succeeded.\r\n        </p>\r\n      </form>\r\n      <div className=\"row justify-content-center\">\r\n        {isSucceeded ? (\r\n          <Link\r\n            to={\"/\"}\r\n            onClick={() => {\r\n              dispatch(scrollToPlants());\r\n            }}\r\n          >\r\n            <button className=\"btn btn-sm form-control\"> Go back </button>\r\n          </Link>\r\n        ) : (\r\n          <Link to={`/plants/read/${_id}`}>\r\n            <button className=\"btn btn-sm form-control\"> Go back </button>\r\n          </Link>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CheckoutForm;\r\n","import { useEffect } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { animateScroll as scroll } from \"react-scroll\";\r\nimport { useAppDispatch, useAppSelector } from \"../hooks\";\r\nimport { RootState } from \"../store\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport { Elements } from \"@stripe/react-stripe-js\";\r\nimport { checkUserLoggedIn, setLoggedInUser } from \"../reducer/jungleSwapSlice\";\r\nimport CheckoutForm from \"../components/CheckoutForm\";\r\n\r\nconst stripePromise = loadStripe(\r\n  \"pk_test_51IQBsPA6EAM4YnfDyrjHWnLHzZ5KkI9tsERzYhBGVoctZBrFUb4Sda035HvcQKpp7thFiqW6QmO8ytPbOAMTg33z00cHvcbojv\"\r\n);\r\n\r\nconst CheckoutPage = (): JSX.Element => {\r\n  const loggedInUser = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.loggedInUser\r\n  );\r\n  const dispatch = useAppDispatch();\r\n\r\n  // Scroll to top as soon as page loads\r\n  useEffect(() => {\r\n    scroll.scrollToTop();\r\n    dispatch(checkUserLoggedIn())\r\n      .unwrap()\r\n      .then((user) => {\r\n        dispatch(setLoggedInUser(user));\r\n      })\r\n      .catch((rejectedValue: any) => {\r\n        console.log(rejectedValue.message);\r\n      });\r\n  }, []);\r\n\r\n  if (!loggedInUser) {\r\n    return <Redirect to={\"/auth/unauthorized\"} />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"container row mt-5\">\r\n      <div className=\"mt-5 col-11 col-md-6 offset-1 offset-md-5 App\">\r\n        <Elements stripe={stripePromise}>\r\n          <CheckoutForm />\r\n        </Elements>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CheckoutPage;\r\n","import { Link } from \"react-router-dom\";\r\nimport { useAppSelector } from \"../hooks\";\r\nimport { Message, Plant, User } from \"../reducer/jungleSwapSlice\";\r\nimport { RootState } from \"../store\";\r\n\r\ntype RequestThumbnailProps = {\r\n  message: Message;\r\n};\r\n\r\nconst RequestThumbnail = ({ message }: RequestThumbnailProps): JSX.Element => {\r\n  const loggedInUser = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.loggedInUser\r\n  );\r\n  const { _id, buyer, seller, plant, messageState } = message;\r\n\r\n  return (\r\n    <>\r\n      {loggedInUser &&\r\n        (seller as User)._id === loggedInUser._id &&\r\n        messageState === true && (\r\n          <div className=\"card p-3 mt-4\" key={_id}>\r\n            <h4> Request for {(plant as Plant).name} </h4>\r\n            <h5> by {(buyer as User).username} </h5>\r\n            <div className=\"text-center\">\r\n              <Link\r\n                className=\"btn smallWidth form-control\"\r\n                to={`/requests/read/${_id}`}\r\n              >\r\n                Details\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default RequestThumbnail;\r\n","import { useEffect } from \"react\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport { animateScroll as scroll } from \"react-scroll\";\r\nimport { useAppDispatch, useAppSelector } from \"../hooks\";\r\nimport {\r\n  fetchAllMessages,\r\n  setIsNewRequest,\r\n  Message,\r\n  setMessages,\r\n  setStartAmountOfRequests,\r\n  setStartAmountOfReplies,\r\n  checkUserLoggedIn,\r\n  setLoggedInUser,\r\n} from \"../reducer/jungleSwapSlice\";\r\nimport { RootState } from \"../store\";\r\nimport RequestTile from \"../components/RequestTile\";\r\nimport LoadingSpinner from \"../components/LoadingSpinner\";\r\n\r\nconst RequestsPage = (): JSX.Element => {\r\n  const loggedInUser = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.loggedInUser\r\n  );\r\n  const isUserChange = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.isUserChange\r\n  );\r\n  const isFetchingMessages = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.isFetchingMessages\r\n  );\r\n  const messages = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.messages\r\n  );\r\n  const amountOfRequests = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.amountOfRequests\r\n  );\r\n  const dispatch = useAppDispatch();\r\n\r\n  // Fetch all messages and reset values as soon as page loads and reset values during cleanup\r\n  useEffect(() => {\r\n    const handleResetAll = (): void => {\r\n      dispatch(setIsNewRequest(false));\r\n      scroll.scrollToTop();\r\n    };\r\n\r\n    dispatch(checkUserLoggedIn())\r\n      .unwrap()\r\n      .then((user) => {\r\n        dispatch(setLoggedInUser(user));\r\n        dispatch(fetchAllMessages())\r\n          .unwrap()\r\n          .then((messages) => {\r\n            dispatch(setMessages(messages));\r\n            isUserChange && dispatch(setStartAmountOfRequests());\r\n            isUserChange && dispatch(setStartAmountOfReplies());\r\n            handleResetAll();\r\n          })\r\n          .catch((rejectedValue: any) => {\r\n            console.log(rejectedValue.message);\r\n          });\r\n      })\r\n      .catch((rejectedValue: any) => {\r\n        console.log(rejectedValue.message);\r\n      });\r\n    return () => {\r\n      handleResetAll();\r\n    };\r\n  }, []);\r\n\r\n  if (!loggedInUser) {\r\n    return <Redirect to={\"/auth/unauthorized\"} />;\r\n  }\r\n\r\n  if (isFetchingMessages) {\r\n    return (\r\n      <div className=\"container mt-5\">\r\n        <LoadingSpinner spinnerText={\"Loading requests...\"} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"container row mt-5\">\r\n      <div className=\"mt-5 col-11 col-md-5 offset-1 offset-md-5\">\r\n        <h2> Requests for your plants </h2>\r\n        <h3 className=\"mb-4\"> [{amountOfRequests}] </h3>\r\n        <div className=\"text-right pr-2\">\r\n          <Link to={\"/\"}>\r\n            <button className=\"btn btn-sm mt-4 smallWidth form-control\">\r\n              Go back\r\n            </button>\r\n          </Link>\r\n        </div>\r\n        {messages.map((message: Message, index: number) => {\r\n          return <RequestTile message={message} key={index} />;\r\n        })}\r\n        {amountOfRequests !== 0 && (\r\n          <div className=\"text-right mt-4 pr-2\">\r\n            <Link to={\"/\"}>\r\n              <button className=\"btn btn-sm mt-4 smallWidth form-control\">\r\n                Go back\r\n              </button>\r\n            </Link>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RequestsPage;\r\n","import { Link } from \"react-router-dom\";\r\nimport { useAppSelector } from \"../hooks\";\r\nimport { Message, Plant, User } from \"../reducer/jungleSwapSlice\";\r\nimport { RootState } from \"../store\";\r\n\r\ntype ReplyThumbnailProps = {\r\n  message: Message;\r\n};\r\n\r\nconst ReplyThumbnail = ({ message }: ReplyThumbnailProps): JSX.Element => {\r\n  const loggedInUser = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.loggedInUser\r\n  );\r\n  const { _id, buyer, seller, plant, reply } = message;\r\n\r\n  return (\r\n    <>\r\n      {loggedInUser && (buyer as User)._id === loggedInUser._id && reply && (\r\n        <div className=\"card p-3 mt-4 \" key={_id}>\r\n          <h4> Reply for {(plant as Plant).name} </h4>\r\n          <h5> by {(seller as User).username} </h5>\r\n          <div className=\"text-center\">\r\n            <Link\r\n              className=\"btn smallWidth form-control\"\r\n              to={`/replies/read/${_id}`}\r\n            >\r\n              Details\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ReplyThumbnail;\r\n","import { useEffect } from \"react\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport { animateScroll as scroll } from \"react-scroll\";\r\nimport { useAppDispatch, useAppSelector } from \"../hooks\";\r\nimport {\r\n  fetchAllMessages,\r\n  setIsNewReply,\r\n  Message,\r\n  setMessages,\r\n  setStartAmountOfRequests,\r\n  setStartAmountOfReplies,\r\n  checkUserLoggedIn,\r\n  setLoggedInUser,\r\n} from \"../reducer/jungleSwapSlice\";\r\nimport { RootState } from \"../store\";\r\nimport ReplyTile from \"../components/ReplyTile\";\r\nimport LoadingSpinner from \"../components/LoadingSpinner\";\r\n\r\nconst RepliesPage = (): JSX.Element => {\r\n  const loggedInUser = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.loggedInUser\r\n  );\r\n  const isUserChange = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.isUserChange\r\n  );\r\n  const isFetchingMessages = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.isFetchingMessages\r\n  );\r\n  const messages = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.messages\r\n  );\r\n  const amountOfReplies = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.amountOfReplies\r\n  );\r\n  const dispatch = useAppDispatch();\r\n\r\n  // Fetch all requests and reset values as soon as page loads and reset values during cleanup\r\n  useEffect(() => {\r\n    const handleResetAll = (): void => {\r\n      dispatch(setIsNewReply(false));\r\n      scroll.scrollToTop();\r\n    };\r\n\r\n    dispatch(checkUserLoggedIn())\r\n      .unwrap()\r\n      .then((user) => {\r\n        dispatch(setLoggedInUser(user));\r\n        dispatch(fetchAllMessages())\r\n          .unwrap()\r\n          .then((messages) => {\r\n            dispatch(setMessages(messages));\r\n            isUserChange && dispatch(setStartAmountOfRequests());\r\n            isUserChange && dispatch(setStartAmountOfReplies());\r\n            handleResetAll();\r\n          })\r\n          .catch((rejectedValue: any) => {\r\n            console.log(rejectedValue.message);\r\n          });\r\n      })\r\n      .catch((rejectedValue: any) => {\r\n        console.log(rejectedValue.message);\r\n      });\r\n    return () => {\r\n      handleResetAll();\r\n    };\r\n  }, []);\r\n\r\n  if (!loggedInUser) {\r\n    return <Redirect to={\"/auth/unauthorized\"} />;\r\n  }\r\n\r\n  if (isFetchingMessages) {\r\n    return (\r\n      <div className=\"container mt-5\">\r\n        <LoadingSpinner spinnerText={\"Loading replies...\"} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"container row mt-5\">\r\n      <div className=\"mt-5 col-11 col-md-5 offset-1 offset-md-5\">\r\n        <h2> Replies for your requests </h2>\r\n        <h3 className=\"mb-4\"> [{amountOfReplies}] </h3>\r\n        <div className=\"text-right pr-2\">\r\n          <Link to={\"/\"}>\r\n            <button className=\"btn btn-sm mt-4 smallWidth form-control\">\r\n              Go back\r\n            </button>\r\n          </Link>\r\n        </div>\r\n        {messages.map((message: Message, index: number) => {\r\n          return <ReplyTile message={message} key={index} />;\r\n        })}\r\n        {amountOfReplies !== 0 && (\r\n          <div className=\"text-right mt-4 pr-2\">\r\n            <Link to={\"/\"}>\r\n              <button className=\"btn btn-sm mt-4 smallWidth form-control\">\r\n                Go back\r\n              </button>\r\n            </Link>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RepliesPage;\r\n","import { useEffect } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { animateScroll as scroll } from \"react-scroll\";\r\nimport { useAppDispatch, useAppSelector } from \"../hooks\";\r\nimport {\r\n  createMessage,\r\n  setError,\r\n  Plant,\r\n  Message,\r\n  User,\r\n  addMessage,\r\n  checkUserLoggedIn,\r\n  setLoggedInUser,\r\n} from \"../reducer/jungleSwapSlice\";\r\nimport { RootState } from \"../store\";\r\n\r\nconst CreateRequestForm = () => {\r\n  const loggedInUser = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.loggedInUser\r\n  );\r\n  const plant = useAppSelector((state: RootState) => state.jungleSwap.plant);\r\n  const error = useAppSelector((state: RootState) => state.jungleSwap.error);\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  // Set variable and scroll to top as soon as page loads\r\n  useEffect(() => {\r\n    dispatch(setError(null));\r\n    scroll.scrollToTop();\r\n    dispatch(checkUserLoggedIn())\r\n      .unwrap()\r\n      .then((user) => {\r\n        dispatch(setLoggedInUser(user));\r\n      })\r\n      .catch((rejectedValue: any) => {\r\n        console.log(rejectedValue.message);\r\n      });\r\n  }, []);\r\n\r\n  if (!loggedInUser) {\r\n    return <Redirect to={\"/auth/unauthorized\"} />;\r\n  }\r\n\r\n  // Create request\r\n  const handleCreateMessage = (event: any, plant: Plant) => {\r\n    event.preventDefault();\r\n    const { request } = event.target;\r\n    const { _id, creator } = plant;\r\n    const newMessage: Message = {\r\n      seller: (creator as User)._id,\r\n      plant: _id,\r\n      request: request.value,\r\n    };\r\n    dispatch(createMessage(newMessage))\r\n      .unwrap()\r\n      .then((newMessage) => {\r\n        dispatch(addMessage(newMessage));\r\n        history.push(`/plants/read/${newMessage.plant}`);\r\n      })\r\n      .catch((rejectedValue: any) => {\r\n        dispatch(setError(rejectedValue.message));\r\n      });\r\n  };\r\n\r\n  const { _id, name } = plant as Plant;\r\n  return (\r\n    <div className=\"container row mt-5\">\r\n      <div className=\"mt-5 col-11 col-md-5 offset-1 offset-md-5\">\r\n        <h2 className=\"mb-4\"> Your message </h2>\r\n        <h3 className=\"mb-4\"> for {name} </h3>\r\n        <form\r\n          className=\"pl-0\"\r\n          onSubmit={(event) => {\r\n            handleCreateMessage(event, plant);\r\n          }}\r\n        >\r\n          <div>\r\n            <textarea\r\n              className=\"mb-4 form-control\"\r\n              name=\"request\"\r\n              cols={35}\r\n              rows={7}\r\n            />\r\n          </div>\r\n          {error && <p className=\"warningColor\"> {error} </p>}\r\n          <div className=\"text-right\">\r\n            <button\r\n              className=\"btn btn-sm mx-2 form-control smallWidth\"\r\n              type=\"submit\"\r\n            >\r\n              Send\r\n            </button>\r\n            <Link to={`/plants/read/${_id}`}>\r\n              <button className=\"btn btn-sm mx-2 form-control smallWidth\">\r\n                Go back\r\n              </button>\r\n            </Link>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateRequestForm;\r\n","import { useEffect } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { Link, useParams, useHistory } from \"react-router-dom\";\r\nimport { animateScroll as scroll } from \"react-scroll\";\r\nimport LoadingSpinner from \"../components/LoadingSpinner\";\r\nimport { useAppDispatch, useAppSelector } from \"../hooks\";\r\nimport {\r\n  readMessage,\r\n  User,\r\n  Plant,\r\n  Message,\r\n  setMessage,\r\n  updateMessage,\r\n  decreaseAmountOfRequests,\r\n  setMessageChanges,\r\n  checkUserLoggedIn,\r\n  setLoggedInUser,\r\n  MessageId,\r\n} from \"../reducer/jungleSwapSlice\";\r\nimport { RootState } from \"../store\";\r\n\r\nconst RequestDetails = (): JSX.Element => {\r\n  const loggedInUser = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.loggedInUser\r\n  );\r\n  const isFetchingMessage = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.isFetchingMessage\r\n  );\r\n  const message = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.message\r\n  );\r\n  const { messageId } = useParams<{ messageId: MessageId }>();\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  // Read message and scroll to top as soon as page loads\r\n  useEffect(() => {\r\n    dispatch(checkUserLoggedIn())\r\n      .unwrap()\r\n      .then((user) => {\r\n        dispatch(setLoggedInUser(user));\r\n        dispatch(readMessage(messageId))\r\n          .unwrap()\r\n          .then((message) => {\r\n            dispatch(setMessage(message));\r\n            scroll.scrollToTop();\r\n          })\r\n          .catch((rejectedValue: any) => {\r\n            console.log(rejectedValue.message);\r\n          });\r\n        scroll.scrollToTop();\r\n      })\r\n      .catch((rejectedValue: any) => {\r\n        console.log(rejectedValue.message);\r\n      });\r\n  }, []);\r\n\r\n  // Set message of the buyer inactive by the seller\r\n  const handleSetMessageInactive = (message: Message, history: any) => {\r\n    const clonedMessage: Message = JSON.parse(JSON.stringify(message));\r\n    clonedMessage.messageState = false;\r\n    dispatch(setMessage(clonedMessage));\r\n    const { _id, buyer, seller, plant, request, reply, messageState } =\r\n      clonedMessage;\r\n    const updatedMessage: Message = {\r\n      buyer,\r\n      seller,\r\n      plant,\r\n      request,\r\n      reply,\r\n      messageState,\r\n    };\r\n    dispatch(updateMessage({ messageId: _id, updatedMessage }))\r\n      .unwrap()\r\n      .then((message) => {\r\n        dispatch(setMessageChanges(message));\r\n        dispatch(decreaseAmountOfRequests());\r\n        history.push(\"/requests/fetch\");\r\n      })\r\n      .catch((rejectedValue: any) => {\r\n        console.log(rejectedValue.message);\r\n      });\r\n  };\r\n\r\n  if (!loggedInUser) {\r\n    return <Redirect to={\"/auth/unauthorized\"} />;\r\n  }\r\n\r\n  const { _id, buyer, plant, request, reply } = message as Message;\r\n\r\n  if (isFetchingMessage || !buyer || !plant) {\r\n    return (\r\n      <div className=\"container mt-5\">\r\n        <LoadingSpinner spinnerText={\"Loading request...\"} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"container row mt-5 \">\r\n      <div className=\"mt-5 col-11 col-md-5 offset-1 offset-md-5\">\r\n        <h2 className=\"mb-5\"> Request for {(plant as Plant).name} </h2>\r\n        <h5> by {(buyer as User).username} </h5>\r\n        <p className=\"textField p-3 mb-4\"> {request} </p>\r\n        {reply && (\r\n          <div>\r\n            <h5> Your reply </h5>\r\n            <p className=\"textField p-3 mb-4\"> {reply} </p>\r\n          </div>\r\n        )}\r\n        <div className=\"text-right px-3\">\r\n          {!reply && (\r\n            <Link to={`/messages/update/${_id}`}>\r\n              <button className=\"btn btn-sm ml-2 smallWidth form-control mb-1\">\r\n                Reply\r\n              </button>\r\n            </Link>\r\n          )}\r\n          <button\r\n            className=\"btn btn-sm ml-2 smallWidth form-control mb-1\"\r\n            onClick={() => {\r\n              handleSetMessageInactive(message, history);\r\n            }}\r\n          >\r\n            Done\r\n          </button>\r\n        </div>\r\n        <div className=\"text-right px-3\">\r\n          <Link to={\"/requests/fetch\"} onClick={scroll.scrollToTop}>\r\n            <button className=\"btn btn-sm mt-4 smallWidth form-control\">\r\n              Go back\r\n            </button>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RequestDetails;\r\n","import { useEffect } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { Link, useParams, useHistory } from \"react-router-dom\";\r\nimport { animateScroll as scroll } from \"react-scroll\";\r\nimport LoadingSpinner from \"../components/LoadingSpinner\";\r\nimport { useAppDispatch, useAppSelector } from \"../hooks\";\r\nimport {\r\n  readMessage,\r\n  deleteMessage,\r\n  User,\r\n  Plant,\r\n  Message,\r\n  setMessage,\r\n  removeMessage,\r\n  decreaseAmountOfReplies,\r\n  checkUserLoggedIn,\r\n  setLoggedInUser,\r\n  MessageId,\r\n} from \"../reducer/jungleSwapSlice\";\r\nimport { RootState } from \"../store\";\r\n\r\nconst ReplyDetails = (): JSX.Element => {\r\n  const loggedInUser = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.loggedInUser\r\n  );\r\n  const isFetchingMessage = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.isFetchingMessage\r\n  );\r\n  const message = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.message\r\n  );\r\n  const { messageId } = useParams<{ messageId: MessageId }>();\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  // Read message and scroll to top as soon as page loads\r\n  useEffect(() => {\r\n    dispatch(checkUserLoggedIn())\r\n      .unwrap()\r\n      .then((user) => {\r\n        dispatch(setLoggedInUser(user));\r\n        dispatch(readMessage(messageId))\r\n          .unwrap()\r\n          .then((message) => {\r\n            dispatch(setMessage(message));\r\n            scroll.scrollToTop();\r\n          })\r\n          .catch((rejectedValue: any) => {\r\n            console.log(rejectedValue.message);\r\n          });\r\n      })\r\n      .catch((rejectedValue: any) => {\r\n        console.log(rejectedValue.message);\r\n      });\r\n  }, []);\r\n\r\n  if (!loggedInUser) {\r\n    return <Redirect to={\"/auth/unauthorized\"} />;\r\n  }\r\n\r\n  const { _id, seller, plant, request, reply } = message as Message;\r\n\r\n  if (isFetchingMessage || !seller || !plant) {\r\n    return (\r\n      <div className=\"container mt-5\">\r\n        <LoadingSpinner spinnerText={\"Loading reply...\"} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"container row mt-5 \">\r\n      <div className=\"mt-5 col-11 col-md-5 offset-1 offset-md-5\">\r\n        <h2 className=\"mb-5\"> Your request for {(plant as Plant).name} </h2>\r\n        <p className=\"textField p-3 mb-4\"> {request} </p>\r\n        {reply && (\r\n          <div>\r\n            <h5> Reply by {(seller as User).username} </h5>\r\n            <p className=\"textField p-3 mb-4\"> {reply} </p>\r\n          </div>\r\n        )}\r\n        <div className=\"text-right px-3\">\r\n          <button\r\n            className=\"btn btn-sm ml-2 smallWidth form-control mb-1\"\r\n            onClick={() => {\r\n              dispatch(deleteMessage(_id))\r\n                .unwrap()\r\n                .then(() => {\r\n                  dispatch(removeMessage(_id));\r\n                  dispatch(decreaseAmountOfReplies());\r\n                  history && history.push(\"/replies/fetch\");\r\n                })\r\n                .catch((rejectedValue: any) => {\r\n                  console.log(rejectedValue.message);\r\n                });\r\n            }}\r\n          >\r\n            Delete\r\n          </button>\r\n        </div>\r\n        <div className=\"text-right px-3\">\r\n          <Link to={\"/replies/fetch\"} onClick={scroll.scrollToTop}>\r\n            <button className=\"btn btn-sm mt-4 smallWidth form-control\">\r\n              Go back\r\n            </button>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReplyDetails;\r\n","import { useEffect } from \"react\";\r\nimport { Link, useHistory, Redirect } from \"react-router-dom\";\r\nimport { animateScroll as scroll } from \"react-scroll\";\r\nimport { useAppDispatch, useAppSelector } from \"../hooks\";\r\nimport {\r\n  setMessage,\r\n  updateMessage,\r\n  Message,\r\n  setMessageChanges,\r\n  checkUserLoggedIn,\r\n  setLoggedInUser,\r\n} from \"../reducer/jungleSwapSlice\";\r\nimport { RootState } from \"../store\";\r\n\r\nconst UpdateRequestForm = (): JSX.Element => {\r\n  const loggedInUser = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.loggedInUser\r\n  );\r\n  const message = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.message\r\n  );\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  // Scroll to top as soon as page loads\r\n  useEffect(() => {\r\n    scroll.scrollToTop();\r\n    dispatch(checkUserLoggedIn())\r\n      .unwrap()\r\n      .then((user) => {\r\n        dispatch(setLoggedInUser(user));\r\n      })\r\n      .catch((rejectedValue: any) => {\r\n        console.log(rejectedValue.message);\r\n      });\r\n  }, []);\r\n\r\n  // Create reply\r\n  const handleCreateReply = ({ target }: any, message: Message): void => {\r\n    const clonedMessage: Message = JSON.parse(JSON.stringify(message));\r\n    clonedMessage.reply = target.value;\r\n    dispatch(setMessage(clonedMessage));\r\n  };\r\n\r\n  // Update message\r\n  const handleUpdateMessage = ({\r\n    _id,\r\n    buyer,\r\n    seller,\r\n    plant,\r\n    request,\r\n    reply,\r\n    messageState,\r\n  }: Message): void => {\r\n    const updatedMessage: Message = {\r\n      buyer,\r\n      seller,\r\n      plant,\r\n      request,\r\n      reply,\r\n      messageState,\r\n    };\r\n    dispatch(updateMessage({ messageId: _id, updatedMessage }))\r\n      .unwrap()\r\n      .then((message) => {\r\n        dispatch(setMessageChanges(message));\r\n        history.push(`/requests/read/${_id}`);\r\n      })\r\n      .catch((rejectedValue: any) => {\r\n        console.log(rejectedValue.message);\r\n      });\r\n  };\r\n\r\n  if (!loggedInUser) {\r\n    return <Redirect to={\"/auth/unauthorized\"} />;\r\n  }\r\n\r\n  const { _id, request } = message as Message;\r\n  return (\r\n    <div className=\"container row mt-5 \">\r\n      <div className=\"mt-2 col-11 col-md-5 offset-1 offset-md-5\">\r\n        <h2 className=\"mt-5 mb-4\"> Reply your request </h2>\r\n        <div className=\"card cardSmallWidth mb-5\">\r\n          <div className=\"card-body\">\r\n            <p> {request} </p>\r\n            <textarea\r\n              className=\"mb-4 form-control\"\r\n              name=\"reply\"\r\n              cols={31}\r\n              rows={6}\r\n              placeholder=\"Your reply\"\r\n              onChange={(event) => {\r\n                handleCreateReply(event, message);\r\n              }}\r\n            />\r\n            <div className=\"row justify-content-end px-3\">\r\n              <button\r\n                className=\"btn btn-sm smallWidth form-control mr-3 mb-2\"\r\n                onClick={() => {\r\n                  handleUpdateMessage(message);\r\n                }}\r\n              >\r\n                Submit\r\n              </button>\r\n              <Link to={`/requests/read/${_id}`}>\r\n                <button className=\"btn btn-sm form-control mb-2\">\r\n                  Go back\r\n                </button>\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UpdateRequestForm;\r\n","import { useEffect } from \"react\";\r\nimport { useAppDispatch, useAppSelector } from \"../hooks\";\r\nimport { setLoggedInUser } from \"../reducer/jungleSwapSlice\";\r\nimport { RootState } from \"../store\";\r\n\r\nconst Unauthorized = (): JSX.Element => {\r\n  const loggedInUser = useAppSelector(\r\n    (state: RootState) => state.jungleSwap.loggedInUser\r\n  );\r\n  const dispatch = useAppDispatch();\r\n\r\n  useEffect(() => {\r\n    loggedInUser && dispatch(setLoggedInUser(null));\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"notFound\">\r\n      <div>\r\n        <h2>\r\n          Oh-oh! <br /> <br />\r\n          We think you got lost in the jungle!\r\n        </h2>\r\n        <h3> 401 Unauthorized </h3>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Unauthorized;\r\n","import { Link } from \"react-router-dom\";\r\n\r\nconst NotFound = (): JSX.Element => {\r\n  return (\r\n    <div className=\"notFound\">\r\n      <div>\r\n        <h2>\r\n          Oh-oh! <br /> <br />\r\n          We think you got lost in the jungle!\r\n        </h2>\r\n        <h3> 404 Not Found </h3>\r\n        <Link to={\"/\"}>\r\n          <button className=\"btn btn-sm ml-2 smallWidth form-control\">\r\n            Take me home{\" \"}\r\n          </button>\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotFound;\r\n","import { useEffect } from \"react\";\r\n\r\nconst KommunicateChat = (): JSX.Element => {\r\n  // Create launcher icon as soon as page loads\r\n  useEffect(() => {\r\n    ((d, m) => {\r\n      const kommunicateSettings = {\r\n        appId: \"10b22c52854a305b79bbdecc356bea5\",\r\n        popupWidget: true,\r\n        automaticChatOpenOnNavigation: true,\r\n      };\r\n      const s = document.createElement(\"script\");\r\n      s.type = \"text/javascript\";\r\n      s.async = true;\r\n      s.src = \"https://widget.kommunicate.io/v2/kommunicate.app\";\r\n      const h = document.getElementsByTagName(\"head\")[0];\r\n      h.appendChild(s);\r\n      (window as any).kommunicate = m;\r\n      m._globals = kommunicateSettings;\r\n    })(document, (window as any).kommunicate || {});\r\n  }, []);\r\n\r\n  return <div />;\r\n};\r\n\r\nexport default KommunicateChat;\r\n","import { Route, Switch, withRouter } from \"react-router-dom\";\r\n\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"./App.min.css\";\r\n\r\nimport NavBar from \"./components/NavBar\";\r\nimport Footer from \"./components/Footer\";\r\nimport Home from \"./screens/Home\";\r\nimport SignUp from \"./screens/SignUp\";\r\nimport SignIn from \"./screens/SignIn\";\r\nimport LogOut from \"./components/LogOut\";\r\nimport CreatePlantForm from \"./screens/CreatePlantForm\";\r\nimport PlantDetails from \"./screens/PlantDetails\";\r\nimport UpdatePlantForm from \"./screens/UpdatePlantForm\";\r\nimport CheckoutPage from \"./screens/CheckoutPage\";\r\nimport RequestsPage from \"./screens/RequestsPage\";\r\nimport RepliesPage from \"./screens/RepliesPage\";\r\nimport CreateRequestForm from \"./screens/CreateRequestForm\";\r\nimport RequestDetails from \"./screens/RequestDetails\";\r\nimport ReplyDetails from \"./screens/ReplyDetails\";\r\nimport UpdateRequestForm from \"./screens/UpdateRequestForm\";\r\nimport Unauthorized from \"./screens/Unauthorized\";\r\nimport NotFound from \"./screens/NotFound\";\r\nimport KommunicateChat from \"./components/Chat\";\r\n\r\nconst App = (): JSX.Element => {\r\n  return (\r\n    <div className=\"main\">\r\n      <NavBar />\r\n      <Switch>\r\n        <Route exact path=\"/\">\r\n          <Home />\r\n        </Route>\r\n        <Route path=\"/plants/create\">\r\n          <CreatePlantForm />\r\n        </Route>\r\n        <Route path=\"/plants/read/:plantId\">\r\n          <PlantDetails />\r\n        </Route>\r\n        <Route path=\"/plants/update\">\r\n          <UpdatePlantForm />\r\n        </Route>\r\n        <Route path=\"/plants/checkout\">\r\n          <CheckoutPage />\r\n        </Route>\r\n\r\n        <Route path=\"/messages/create\">\r\n          <CreateRequestForm />\r\n        </Route>\r\n        <Route path=\"/messages/update\">\r\n          <UpdateRequestForm />\r\n        </Route>\r\n\r\n        <Route path=\"/requests/fetch\">\r\n          <RequestsPage />\r\n        </Route>\r\n        <Route path=\"/requests/read/:messageId\">\r\n          <RequestDetails />\r\n        </Route>\r\n\r\n        <Route path=\"/replies/fetch\">\r\n          <RepliesPage />\r\n        </Route>\r\n        <Route path=\"/replies/read/:messageId\">\r\n          <ReplyDetails />\r\n        </Route>\r\n\r\n        <Route path=\"/auth/signup\">\r\n          <SignUp />\r\n        </Route>\r\n        <Route path=\"/auth/signin\">\r\n          <SignIn />\r\n        </Route>\r\n        <Route path=\"/auth/logout\">\r\n          <LogOut />\r\n        </Route>\r\n        <Route path=\"auth/unauthorized\">\r\n          <Unauthorized />\r\n        </Route>\r\n\r\n        <Route component={NotFound} />\r\n      </Switch>\r\n      <KommunicateChat />\r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(App);\r\n","import { configureStore } from \"@reduxjs/toolkit\";\r\nimport jungleSwapSlice from \"./reducer/jungleSwapSlice\";\r\n\r\nexport const store = configureStore({\r\n  reducer: { jungleSwap: jungleSwapSlice },\r\n});\r\n\r\nexport type RootState = ReturnType<typeof store.getState>;\r\n\r\nexport type AppDispatch = typeof store.dispatch;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport App from \"./App\";\r\nimport { Provider } from \"react-redux\";\r\nimport { store } from \"./store\";\r\n\r\nimport \"./index.css\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <BrowserRouter>\r\n        <App />\r\n      </BrowserRouter>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.querySelector(\"#root\")\r\n);\r\n"],"sourceRoot":""}